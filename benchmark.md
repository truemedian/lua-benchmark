## arithmetic operations

#### One-Time Setup
```lua
local exp, log = math.exp, math.log
local a = -12345.0
local b = 522
```

| Test | Code |
|------|------|
| `negate` | `out = -a` |
| `add` | `out = a + b` |
| `sub` | `out = a - b` |
| `mul` | `out = a * b` |
| `div` | `out = a / b` |
| `mod` | `out = a % b` |
| `exp` | `out = a ^ b` |
| `math.exp` | `out = exp(b)` |
| `math.log` | `out = log(b)` |
| `bor` | `out = a \| b` |
| `band` | `out = a & b` |
| `bxor` | `out = a ~ b` |
| `bnot` | `out = ~a` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `negate` | 2.634ns | 6.736ns | 6.737ns | 6.738ns | 8.007ns | 6.734ns | 0.088ns | 1.00x | 67 (0.7%) |
| `add` | 1.608ns | 11.547ns | 11.550ns | 11.560ns | 62.145ns | 11.600ns | 0.797ns | 1.71x | 22 (0.2%) |
| `sub` | 0.470ns | 11.696ns | 11.697ns | 11.699ns | 14.303ns | 11.694ns | 0.151ns | 1.74x | 53 (0.5%) |
| `mul` | 3.346ns | 11.251ns | 11.253ns | 11.255ns | 65.885ns | 11.267ns | 0.737ns | 1.67x | 14 (0.1%) |
| `div` | 4.977ns | 11.548ns | 11.549ns | 11.551ns | 45.998ns | 11.551ns | 0.418ns | 1.71x | 25 (0.3%) |
| `mod` | 1.558ns | 11.891ns | 11.901ns | 11.910ns | 49.711ns | 11.901ns | 0.583ns | 1.77x | 24 (0.2%) |
| `exp` | 19.607ns | 25.112ns | 25.210ns | 25.351ns | 93.772ns | 25.284ns | 0.806ns | 3.74x | 19 (0.2%) |
| `math.exp` | 1.903ns | 34.013ns | 34.423ns | 34.727ns | 200.124ns | 34.416ns | 2.389ns | 5.11x | 17 (0.2%) |
| `math.log` | 17.376ns | 31.889ns | 32.367ns | 32.812ns | 126.229ns | 32.350ns | 1.491ns | 4.80x | 22 (0.2%) |
| `bor` | - | - | - | - | - | - | - | - | - |
| `band` | - | - | - | - | - | - | - | - | - |
| `bxor` | - | - | - | - | - | - | - | - | - |
| `bnot` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `negate` | 2.414ns | 9.475ns | 9.476ns | 9.478ns | 23.038ns | 9.467ns | 0.248ns | 1.00x | 72 (0.7%) |
| `add` | 2.082ns | 13.620ns | 13.622ns | 13.624ns | 75.232ns | 13.619ns | 0.828ns | 1.44x | 21 (0.2%) |
| `sub` | 3.872ns | 13.620ns | 13.622ns | 13.625ns | 65.096ns | 13.619ns | 0.704ns | 1.44x | 19 (0.2%) |
| `mul` | 3.694ns | 13.915ns | 13.918ns | 13.921ns | 94.080ns | 13.922ns | 1.104ns | 1.47x | 13 (0.1%) |
| `div` | 3.458ns | 13.620ns | 13.623ns | 13.627ns | 55.391ns | 13.613ns | 0.585ns | 1.44x | 26 (0.3%) |
| `mod` | 4.794ns | 15.095ns | 15.888ns | 16.123ns | 62.917ns | 15.687ns | 0.999ns | 1.68x | 22 (0.2%) |
| `exp` | 1.174ns | 27.375ns | 27.656ns | 28.104ns | 32.524ns | 27.731ns | 0.742ns | 2.92x | 57 (0.6%) |
| `math.exp` | 7.406ns | 35.708ns | 36.231ns | 36.569ns | 235.802ns | 36.152ns | 2.475ns | 3.82x | 19 (0.2%) |
| `math.log` | 13.175ns | 35.923ns | 36.867ns | 37.793ns | 267.113ns | 36.863ns | 2.722ns | 3.89x | 15 (0.1%) |
| `bor` | - | - | - | - | - | - | - | - | - |
| `band` | - | - | - | - | - | - | - | - | - |
| `bxor` | - | - | - | - | - | - | - | - | - |
| `bnot` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `negate` | 1.761ns | 7.575ns | 7.577ns | 7.579ns | 37.689ns | 7.577ns | 0.339ns | 1.00x | 34 (0.3%) |
| `add` | 4.174ns | 14.503ns | 14.522ns | 14.595ns | 81.753ns | 14.564ns | 1.011ns | 1.92x | 12 (0.1%) |
| `sub` | 5.840ns | 14.611ns | 14.674ns | 14.686ns | 46.623ns | 14.621ns | 0.518ns | 1.94x | 55 (0.5%) |
| `mul` | 5.295ns | 14.918ns | 14.929ns | 14.938ns | 88.802ns | 14.943ns | 1.068ns | 1.97x | 17 (0.2%) |
| `div` | 3.807ns | 14.739ns | 14.746ns | 14.754ns | 56.547ns | 14.750ns | 0.541ns | 1.95x | 21 (0.2%) |
| `mod` | 9.978ns | 20.667ns | 20.689ns | 20.730ns | 101.413ns | 20.710ns | 1.107ns | 2.73x | 21 (0.2%) |
| `exp` | 3.645ns | 29.522ns | 29.570ns | 29.616ns | 148.113ns | 29.592ns | 1.827ns | 3.90x | 28 (0.3%) |
| `math.exp` | 2.188ns | 37.484ns | 37.580ns | 37.674ns | 242.414ns | 37.633ns | 3.371ns | 4.96x | 10 (0.1%) |
| `math.log` | 12.389ns | 38.388ns | 38.502ns | 38.588ns | 241.866ns | 38.525ns | 2.564ns | 5.08x | 14 (0.1%) |
| `bor` | 1.657ns | 17.223ns | 17.236ns | 17.248ns | 83.936ns | 17.245ns | 0.906ns | 2.27x | 17 (0.2%) |
| `band` | 5.276ns | 17.237ns | 17.251ns | 17.264ns | 58.393ns | 17.247ns | 0.511ns | 2.28x | 41 (0.4%) |
| `bxor` | 5.804ns | 17.219ns | 17.236ns | 17.258ns | 91.940ns | 17.250ns | 1.113ns | 2.27x | 20 (0.2%) |
| `bnot` | 5.917ns | 15.543ns | 15.559ns | 15.574ns | 33.450ns | 15.551ns | 0.284ns | 2.05x | 72 (0.7%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `negate` | 1.841ns | 7.106ns | 7.109ns | 7.116ns | 36.270ns | 7.110ns | 0.377ns | 1.00x | 37 (0.4%) |
| `add` | 3.553ns | 9.784ns | 9.786ns | 9.788ns | 37.902ns | 9.787ns | 0.385ns | 1.38x | 32 (0.3%) |
| `sub` | 4.462ns | 10.955ns | 10.957ns | 10.959ns | 82.320ns | 10.974ns | 1.051ns | 1.54x | 5 (0.1%) |
| `mul` | 7.548ns | 10.911ns | 10.923ns | 10.940ns | 27.803ns | 10.921ns | 0.268ns | 1.54x | 34 (0.3%) |
| `div` | 3.285ns | 9.740ns | 9.801ns | 9.998ns | 56.967ns | 9.849ns | 0.530ns | 1.38x | 21 (0.2%) |
| `mod` | 6.732ns | 17.763ns | 17.768ns | 17.774ns | 59.013ns | 17.779ns | 0.695ns | 2.50x | 21 (0.2%) |
| `exp` | 10.117ns | 24.436ns | 24.571ns | 24.722ns | 93.009ns | 24.613ns | 1.008ns | 3.46x | 41 (0.4%) |
| `math.exp` | 20.542ns | 34.614ns | 35.151ns | 35.651ns | 221.503ns | 35.163ns | 2.411ns | 4.94x | 17 (0.2%) |
| `math.log` | 22.745ns | 34.687ns | 34.956ns | 35.397ns | 227.512ns | 35.147ns | 2.579ns | 4.92x | 20 (0.2%) |
| `bor` | 1.516ns | 12.139ns | 12.141ns | 12.144ns | 56.402ns | 12.146ns | 0.503ns | 1.71x | 43 (0.4%) |
| `band` | 4.683ns | 12.732ns | 12.738ns | 13.008ns | 72.590ns | 12.849ns | 0.731ns | 1.79x | 14 (0.1%) |
| `bxor` | 2.210ns | 12.367ns | 12.438ns | 12.719ns | 76.814ns | 12.530ns | 0.856ns | 1.75x | 17 (0.2%) |
| `bnot` | 7.184ns | 9.712ns | 9.719ns | 9.724ns | 44.382ns | 9.716ns | 0.369ns | 1.37x | 25 (0.3%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `negate` | 0.254ns | 0.296ns | 0.296ns | 0.296ns | 0.353ns | 0.296ns | 0.001ns | 1.00x | 173 (1.7%) |
| `add` | 0.030ns | 0.296ns | 0.296ns | 0.296ns | 0.454ns | 0.296ns | 0.003ns | 1.00x | 28 (0.3%) |
| `sub` | 0.278ns | 0.296ns | 0.296ns | 0.296ns | 0.313ns | 0.296ns | 0.001ns | 1.00x | 211 (2.1%) |
| `mul` | 0.074ns | 0.296ns | 0.296ns | 0.296ns | 0.695ns | 0.296ns | 0.005ns | 1.00x | 8 (0.1%) |
| `div` | 0.239ns | 0.296ns | 0.296ns | 0.296ns | 0.389ns | 0.296ns | 0.002ns | 1.00x | 94 (0.9%) |
| `mod` | 0.058ns | 0.296ns | 0.296ns | 0.296ns | 0.753ns | 0.296ns | 0.007ns | 1.00x | 20 (0.2%) |
| `exp` | 0.058ns | 0.296ns | 0.296ns | 0.296ns | 0.689ns | 0.296ns | 0.005ns | 1.00x | 12 (0.1%) |
| `math.exp` | 0.251ns | 0.296ns | 0.296ns | 0.296ns | 0.351ns | 0.296ns | 0.001ns | 1.00x | 193 (1.9%) |
| `math.log` | 0.268ns | 0.296ns | 0.296ns | 0.296ns | 0.354ns | 0.296ns | 0.002ns | 1.00x | 187 (1.9%) |
| `bor` | - | - | - | - | - | - | - | - | - |
| `band` | - | - | - | - | - | - | - | - | - |
| `bxor` | - | - | - | - | - | - | - | - | - |
| `bnot` | - | - | - | - | - | - | - | - | - |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `negate` | 0.728ns | 4.145ns | 4.147ns | 4.157ns | 28.061ns | 4.160ns | 0.336ns | 1.00x | 25 (0.3%) |
| `add` | 4.047ns | 5.812ns | 5.817ns | 5.823ns | 42.926ns | 5.824ns | 0.429ns | 1.40x | 11 (0.1%) |
| `sub` | 0.386ns | 6.869ns | 6.981ns | 7.122ns | 65.858ns | 7.014ns | 0.842ns | 1.68x | 10 (0.1%) |
| `mul` | 2.458ns | 5.810ns | 5.818ns | 5.822ns | 15.793ns | 5.816ns | 0.127ns | 1.40x | 35 (0.4%) |
| `div` | 2.271ns | 5.777ns | 5.792ns | 5.807ns | 35.498ns | 5.801ns | 0.400ns | 1.40x | 26 (0.3%) |
| `mod` | 4.559ns | 11.347ns | 11.366ns | 11.386ns | 13.719ns | 11.366ns | 0.121ns | 2.74x | 74 (0.7%) |
| `exp` | 9.777ns | 21.305ns | 21.334ns | 21.363ns | 74.503ns | 21.348ns | 0.783ns | 5.14x | 26 (0.3%) |
| `math.exp` | 3.937ns | 16.160ns | 16.166ns | 16.173ns | 32.819ns | 16.154ns | 0.334ns | 3.90x | 43 (0.4%) |
| `math.log` | 5.057ns | 15.311ns | 15.325ns | 15.347ns | 89.971ns | 15.344ns | 0.933ns | 3.70x | 12 (0.1%) |
| `bor` | - | - | - | - | - | - | - | - | - |
| `band` | - | - | - | - | - | - | - | - | - |
| `bxor` | - | - | - | - | - | - | - | - | - |
| `bnot` | - | - | - | - | - | - | - | - | - |

## character iteration

#### One-Time Setup
```lua
local text = "Hello, this is an example text"
local char, sub, gsub, gmatch = string.char, string.sub, string.gsub, string.gmatch
local cstr = ffi and ffi.cast("const char*", text) or nil
```

| Test | Code |
|------|------|
| `sub` | `for i = 1, #text do out = text:sub(i, i) end` |
| `gmatch` | `for c in gmatch(text, ".") do out = c end` |
| `gsub` | `gsub(text, ".", function(c) out = c end)` |
| `ffi cstr` | `for i = 0, #text - 1 do out = char(cstr[i]) end` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 456.064ns | 1.976µs | 1.982µs | 1.988µs | 13.748µs | 1.985µs | 164.078ns | 1.00x | 11 (0.1%) |
| `gmatch` | 470.502ns | 2.065µs | 2.067µs | 2.068µs | 4.086µs | 2.067µs | 35.614ns | 1.04x | 42 (0.4%) |
| `gsub` | 37.903ns | 2.422µs | 2.431µs | 2.439µs | 13.647µs | 2.433µs | 192.984ns | 1.23x | 8 (0.1%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 1.376µs | 2.227µs | 2.242µs | 2.257µs | 9.656µs | 2.244µs | 123.529ns | 1.12x | 17 (0.2%) |
| `gmatch` | 187.189ns | 1.991µs | 1.997µs | 2.004µs | 6.318µs | 1.998µs | 66.076ns | 1.00x | 24 (0.2%) |
| `gsub` | 1.626µs | 2.565µs | 2.579µs | 2.592µs | 9.040µs | 2.580µs | 100.633ns | 1.29x | 20 (0.2%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 558.248ns | 2.066µs | 2.076µs | 2.086µs | 13.470µs | 2.078µs | 160.476ns | 1.44x | 15 (0.1%) |
| `gmatch` | 729.475ns | 1.433µs | 1.439µs | 1.443µs | 5.154µs | 1.439µs | 46.137ns | 1.00x | 26 (0.3%) |
| `gsub` | 542.248ns | 2.534µs | 2.553µs | 2.570µs | 13.332µs | 2.553µs | 140.635ns | 1.77x | 20 (0.2%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 607.021ns | 2.033µs | 2.051µs | 2.071µs | 13.570µs | 2.055µs | 162.418ns | 1.38x | 13 (0.1%) |
| `gmatch` | 523.890ns | 1.482µs | 1.488µs | 1.494µs | 6.563µs | 1.490µs | 76.139ns | 1.00x | 23 (0.2%) |
| `gsub` | 979.471ns | 1.747µs | 1.754µs | 1.760µs | 8.054µs | 1.755µs | 67.812ns | 1.18x | 15 (0.1%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 157.720ns | 332.788ns | 332.921ns | 333.043ns | 574.426ns | 332.903ns | 5.410ns | 1.00x | 37 (0.4%) |
| `gmatch` | 603.101ns | 1.515µs | 1.515µs | 1.516µs | 5.963µs | 1.517µs | 68.582ns | 4.55x | 16 (0.2%) |
| `gsub` | 772.796ns | 2.292µs | 2.302µs | 2.315µs | 11.067µs | 2.304µs | 97.700ns | 6.92x | 22 (0.2%) |
| `ffi cstr` | 175.445ns | 354.188ns | 358.163ns | 367.111ns | 1.508µs | 362.839ns | 26.546ns | 1.08x | 15 (0.1%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 439.794ns | 1.122µs | 1.130µs | 1.137µs | 7.370µs | 1.132µs | 91.555ns | 1.00x | 8 (0.1%) |
| `gmatch` | 903.578ns | 1.195µs | 1.199µs | 1.205µs | 3.456µs | 1.201µs | 26.813ns | 1.06x | 22 (0.2%) |
| `gsub` | 952.425ns | 2.326µs | 2.336µs | 2.347µs | 12.770µs | 2.340µs | 166.527ns | 2.07x | 12 (0.1%) |
| `ffi cstr` | 519.415ns | 1.801µs | 1.804µs | 1.808µs | 6.606µs | 1.805µs | 55.349ns | 1.60x | 29 (0.3%) |

## closure creation

#### One-Time Setup
```lua
local function f1(a, b, fn) return fn(a + b) end
local function f2(a) return a * 2 end
```

| Test | Code |
|------|------|
| `saved fn` | `out = f1(1, 2, f2)` |
| `new closure` | `out = f1(1, 2, function(a) return a * 2 end)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 23.675ns | 51.594ns | 51.981ns | 52.456ns | 275.585ns | 52.075ns | 2.637ns | 1.00x | 17 (0.2%) |
| `new closure` | 14.450ns | 69.704ns | 70.418ns | 71.172ns | 232.884ns | 70.466ns | 3.106ns | 1.35x | 11 (0.1%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 44.957ns | 71.478ns | 71.723ns | 72.036ns | 92.894ns | 71.713ns | 0.887ns | 1.01x | 103 (1.0%) |
| `new closure` | 6.514ns | 70.734ns | 70.999ns | 71.290ns | 227.586ns | 71.037ns | 3.031ns | 1.00x | 21 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 14.525ns | 50.941ns | 50.974ns | 51.005ns | 171.394ns | 50.970ns | 2.328ns | 1.00x | 42 (0.4%) |
| `new closure` | 37.120ns | 52.605ns | 52.632ns | 52.663ns | 57.601ns | 52.658ns | 0.475ns | 1.03x | 172 (1.7%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 15.402ns | 40.267ns | 40.526ns | 40.841ns | 157.539ns | 40.533ns | 1.595ns | 1.00x | 31 (0.3%) |
| `new closure` | 45.796ns | 59.630ns | 60.531ns | 60.935ns | 286.607ns | 60.113ns | 2.722ns | 1.49x | 22 (0.2%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 0.283ns | 0.296ns | 0.296ns | 0.296ns | 0.542ns | 0.296ns | 0.003ns | 1.00x | 28 (0.3%) |
| `new closure` | 28.907ns | 32.464ns | 53.358ns | 64.027ns | 195.706ns | 45.990ns | 14.094ns | 180.19x | 5 (0.1%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 5.367ns | 21.325ns | 21.403ns | 21.451ns | 79.462ns | 21.395ns | 0.709ns | 1.00x | 25 (0.3%) |
| `new closure` | 21.910ns | 38.145ns | 51.428ns | 72.277ns | 251.596ns | 50.784ns | 15.075ns | 2.40x | 3 (0.0%) |

## cube

#### One-Time Setup
```lua
local x, pow = 10, math.pow
```

| Test | Code |
|------|------|
| `math.pow (global)` | `out = math.pow(x, 2)` |
| `math.pow (local)` | `out = pow(x, 2)` |
| `multiply` | `out = x * x` |
| `exponent` | `out = x ^ 2` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 8.003ns | 68.426ns | 68.517ns | 68.611ns | 356.397ns | 68.590ns | 4.481ns | 6.09x | 16 (0.2%) |
| `math.pow (local)` | 19.699ns | 54.334ns | 54.422ns | 54.511ns | 150.357ns | 54.435ns | 1.506ns | 4.84x | 22 (0.2%) |
| `multiply` | 7.522ns | 11.251ns | 11.253ns | 11.255ns | 62.705ns | 11.263ns | 0.651ns | 1.00x | 20 (0.2%) |
| `exponent` | 7.535ns | 25.765ns | 25.776ns | 25.787ns | 52.484ns | 25.752ns | 0.510ns | 2.29x | 50 (0.5%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 23.721ns | 73.965ns | 74.087ns | 74.211ns | 332.593ns | 74.138ns | 3.526ns | 5.32x | 21 (0.2%) |
| `math.pow (local)` | 8.919ns | 54.251ns | 54.389ns | 54.525ns | 145.072ns | 54.382ns | 1.429ns | 3.91x | 33 (0.3%) |
| `multiply` | 3.697ns | 13.916ns | 13.918ns | 13.921ns | 59.642ns | 13.906ns | 0.612ns | 1.00x | 32 (0.3%) |
| `exponent` | 7.647ns | 28.193ns | 28.202ns | 28.210ns | 96.355ns | 28.174ns | 1.033ns | 2.03x | 20 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 51.450ns | 73.663ns | 73.820ns | 73.971ns | 211.937ns | 73.792ns | 1.698ns | 7.15x | 43 (0.4%) |
| `math.pow (local)` | 21.348ns | 59.986ns | 60.079ns | 60.175ns | 199.355ns | 60.079ns | 1.826ns | 5.82x | 34 (0.3%) |
| `multiply` | 0.822ns | 10.328ns | 10.331ns | 10.334ns | 37.434ns | 10.329ns | 0.469ns | 1.00x | 35 (0.4%) |
| `exponent` | 0.495ns | 31.798ns | 31.876ns | 31.961ns | 52.793ns | 31.859ns | 0.587ns | 3.09x | 50 (0.5%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 28.450ns | 64.140ns | 64.494ns | 64.908ns | 327.562ns | 64.608ns | 3.858ns | 8.07x | 19 (0.2%) |
| `math.pow (local)` | 10.003ns | 54.834ns | 55.381ns | 56.097ns | 67.366ns | 55.432ns | 1.139ns | 6.93x | 41 (0.4%) |
| `multiply` | 0.111ns | 10.358ns | 10.366ns | 10.378ns | 79.799ns | 10.387ns | 1.089ns | 1.30x | 27 (0.3%) |
| `exponent` | 0.473ns | 7.994ns | 7.996ns | 8.004ns | 16.010ns | 7.997ns | 0.173ns | 1.00x | 44 (0.4%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 1.911ns | 2.961ns | 2.961ns | 2.962ns | 4.825ns | 2.962ns | 0.025ns | 10.00x | 12 (0.1%) |
| `math.pow (local)` | 0.273ns | 0.296ns | 0.296ns | 0.296ns | 0.319ns | 0.296ns | 0.001ns | 1.00x | 187 (1.9%) |
| `multiply` | 0.073ns | 0.296ns | 0.296ns | 0.296ns | 0.329ns | 0.296ns | 0.002ns | 1.00x | 29 (0.3%) |
| `exponent` | 0.231ns | 0.296ns | 0.296ns | 0.296ns | 0.315ns | 0.296ns | 0.001ns | 1.00x | 121 (1.2%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 24.314ns | 32.404ns | 32.414ns | 32.426ns | 94.776ns | 32.434ns | 1.017ns | 5.57x | 12 (0.1%) |
| `math.pow (local)` | 13.190ns | 28.681ns | 28.711ns | 28.742ns | 173.037ns | 28.732ns | 2.017ns | 4.93x | 6 (0.1%) |
| `multiply` | 0.866ns | 5.812ns | 5.818ns | 5.823ns | 25.796ns | 5.820ns | 0.225ns | 1.00x | 35 (0.4%) |
| `exponent` | 11.959ns | 22.981ns | 22.987ns | 22.994ns | 89.799ns | 22.997ns | 1.167ns | 3.95x | 19 (0.2%) |

## default

#### One-Time Setup
```lua
local x = false
```

| Test | Code |
|------|------|
| `if-else` | `if not x then out = 1 else out = x end` |
| `or` | `out = x or 1` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 2.412ns | 11.375ns | 11.378ns | 11.381ns | 86.761ns | 11.397ns | 1.166ns | 1.13x | 9 (0.1%) |
| `or` | 3.089ns | 9.791ns | 10.043ns | 10.147ns | 26.725ns | 9.982ns | 0.321ns | 1.00x | 36 (0.4%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 2.623ns | 15.387ns | 15.398ns | 15.401ns | 82.049ns | 15.382ns | 0.757ns | 1.21x | 21 (0.2%) |
| `or` | 4.998ns | 12.714ns | 12.736ns | 13.012ns | 84.771ns | 12.825ns | 0.876ns | 1.00x | 17 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 7.433ns | 12.096ns | 12.101ns | 12.107ns | 73.944ns | 12.109ns | 0.838ns | 1.23x | 14 (0.1%) |
| `or` | 0.516ns | 9.797ns | 9.801ns | 9.806ns | 29.640ns | 9.798ns | 0.293ns | 1.00x | 36 (0.4%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 1.452ns | 8.701ns | 8.706ns | 8.710ns | 38.253ns | 8.712ns | 0.449ns | 1.01x | 40 (0.4%) |
| `or` | 2.192ns | 8.586ns | 8.588ns | 8.589ns | 48.917ns | 8.593ns | 0.557ns | 1.00x | 17 (0.2%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 0.183ns | 0.296ns | 0.296ns | 0.296ns | 0.751ns | 0.296ns | 0.005ns | 1.00x | 6 (0.1%) |
| `or` | 0.267ns | 0.296ns | 0.296ns | 0.296ns | 0.338ns | 0.296ns | 0.001ns | 1.00x | 164 (1.6%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 5.289ns | 7.401ns | 7.449ns | 7.528ns | 15.260ns | 7.459ns | 0.155ns | 1.51x | 39 (0.4%) |
| `or` | 2.820ns | 4.919ns | 4.935ns | 4.978ns | 30.154ns | 4.966ns | 0.372ns | 1.00x | 15 (0.1%) |

## empty string

#### One-Time Setup
```lua
local str = ""
local cstr = ffi and ffi.cast("const char*", str) or nil
```

| Test | Code |
|------|------|
| `length` | `out = #str == 0` |
| `value` | `out = str == ""` |
| `ffi cstr` | `out = cstr[0] == 0` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 6.772ns | 16.208ns | 16.849ns | 17.451ns | 131.799ns | 16.834ns | 1.536ns | 1.30x | 9 (0.1%) |
| `value` | 4.649ns | 12.562ns | 12.993ns | 13.462ns | 36.673ns | 13.012ns | 0.684ns | 1.00x | 12 (0.1%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 14.969ns | 21.767ns | 21.790ns | 21.813ns | 107.467ns | 21.813ns | 1.349ns | 1.30x | 21 (0.2%) |
| `value` | 5.424ns | 16.707ns | 16.719ns | 16.730ns | 70.871ns | 16.707ns | 0.802ns | 1.00x | 30 (0.3%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 1.048ns | 21.397ns | 21.435ns | 21.481ns | 26.768ns | 21.421ns | 0.324ns | 1.23x | 53 (0.5%) |
| `value` | 0.768ns | 17.380ns | 17.401ns | 17.415ns | 101.590ns | 17.400ns | 1.156ns | 1.00x | 33 (0.3%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 0.528ns | 13.904ns | 13.942ns | 13.988ns | 81.765ns | 13.943ns | 0.747ns | 1.34x | 24 (0.2%) |
| `value` | 6.977ns | 10.347ns | 10.405ns | 10.651ns | 13.297ns | 10.459ns | 0.233ns | 1.00x | 45 (0.4%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 0.132ns | 0.296ns | 0.296ns | 0.296ns | 0.562ns | 0.296ns | 0.003ns | 1.00x | 25 (0.3%) |
| `value` | 0.269ns | 0.296ns | 0.296ns | 0.296ns | 0.339ns | 0.296ns | 0.001ns | 1.00x | 153 (1.5%) |
| `ffi cstr` | 0.267ns | 0.296ns | 0.296ns | 0.296ns | 0.720ns | 0.296ns | 0.004ns | 1.00x | 16 (0.2%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 3.748ns | 9.116ns | 9.123ns | 9.130ns | 44.955ns | 9.123ns | 0.454ns | 1.28x | 26 (0.3%) |
| `value` | 1.046ns | 7.127ns | 7.129ns | 7.130ns | 50.044ns | 7.140ns | 0.523ns | 1.00x | 16 (0.2%) |
| `ffi cstr` | 32.656ns | 42.567ns | 42.808ns | 43.064ns | 164.105ns | 42.859ns | 1.877ns | 6.01x | 26 (0.3%) |

## fmod

#### One-Time Setup
```lua
local fmod1, floor = math.fmod, math.floor
local function fmod2(a, b)
	if (a < 0) == (b < 0) then
		return a % b
	end
	return (a % b) - b
end
local function fmod3(a, b)
	return (a % b) - (((a < 0) == (b < 0)) and 0 or b)
end
local function fmod4(a, b)
	return a - floor(a / b) * b
end
local fmod5
if _VERSION:match("%d.%d") >= "5.3" then
	fmod5 = load("return function(a, b) return a - a // b * b end")()
end
```

| Test | Code |
|------|------|
| `fmod (global)` | `out = math.fmod(__i, 10)` |
| `fmod (local)` | `out = fmod1(__i, 10)` |
| `branchy` | `out = fmod2(__i, 10)` |
| `branchless` | `out = fmod3(__i, 10)` |
| `definition (math.floor)` | `out = fmod4(__i, 10)` |
| `definition (floor division)` | `out = fmod5(__i, 10)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 42.169ns | 52.085ns | 52.757ns | 53.486ns | 116.811ns | 52.803ns | 1.320ns | 1.36x | 23 (0.2%) |
| `fmod (local)` | 11.162ns | 38.483ns | 38.792ns | 39.089ns | 222.289ns | 38.816ns | 2.543ns | 1.00x | 29 (0.3%) |
| `branchy` | 2.070ns | 51.900ns | 52.214ns | 52.577ns | 282.479ns | 52.271ns | 2.541ns | 1.35x | 18 (0.2%) |
| `branchless` | 25.881ns | 62.450ns | 62.919ns | 63.450ns | 373.234ns | 63.045ns | 4.413ns | 1.62x | 17 (0.2%) |
| `definition (math.floor)` | 29.819ns | 61.392ns | 61.637ns | 62.067ns | 150.140ns | 61.723ns | 1.232ns | 1.59x | 44 (0.4%) |
| `definition (floor division)` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 33.798ns | 61.398ns | 61.620ns | 61.773ns | 109.244ns | 61.590ns | 1.112ns | 1.48x | 81 (0.8%) |
| `fmod (local)` | 3.159ns | 41.503ns | 41.672ns | 41.828ns | 286.544ns | 41.708ns | 3.832ns | 1.00x | 16 (0.2%) |
| `branchy` | 17.025ns | 68.204ns | 68.774ns | 69.163ns | 248.318ns | 68.628ns | 2.802ns | 1.65x | 20 (0.2%) |
| `branchless` | 31.462ns | 78.622ns | 79.493ns | 80.577ns | 347.075ns | 79.645ns | 4.753ns | 1.91x | 24 (0.2%) |
| `definition (math.floor)` | 22.066ns | 74.709ns | 75.277ns | 75.788ns | 92.851ns | 75.228ns | 1.494ns | 1.81x | 46 (0.5%) |
| `definition (floor division)` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 4.380ns | 55.808ns | 55.837ns | 55.870ns | 93.205ns | 55.804ns | 1.156ns | 1.32x | 47 (0.5%) |
| `fmod (local)` | 11.973ns | 42.321ns | 42.353ns | 42.404ns | 259.955ns | 42.391ns | 3.125ns | 1.00x | 16 (0.2%) |
| `branchy` | 25.304ns | 62.157ns | 62.216ns | 62.295ns | 164.469ns | 62.207ns | 1.329ns | 1.47x | 36 (0.4%) |
| `branchless` | 12.834ns | 71.725ns | 71.804ns | 71.891ns | 310.937ns | 71.866ns | 4.083ns | 1.70x | 26 (0.3%) |
| `definition (math.floor)` | 20.942ns | 68.879ns | 69.224ns | 69.574ns | 169.851ns | 69.195ns | 1.532ns | 1.63x | 58 (0.6%) |
| `definition (floor division)` | 17.578ns | 45.892ns | 45.909ns | 45.926ns | 182.031ns | 45.903ns | 1.952ns | 1.08x | 30 (0.3%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 16.251ns | 45.178ns | 45.685ns | 46.265ns | 158.528ns | 45.771ns | 1.911ns | 1.17x | 22 (0.2%) |
| `fmod (local)` | 9.680ns | 38.941ns | 39.678ns | 40.363ns | 122.031ns | 39.664ns | 1.487ns | 1.02x | 28 (0.3%) |
| `branchy` | 1.555ns | 44.283ns | 44.336ns | 44.385ns | 58.813ns | 44.297ns | 0.952ns | 1.14x | 73 (0.7%) |
| `branchless` | 38.847ns | 52.496ns | 52.538ns | 52.594ns | 71.209ns | 52.570ns | 0.650ns | 1.35x | 71 (0.7%) |
| `definition (math.floor)` | 31.575ns | 52.381ns | 52.711ns | 53.403ns | 232.970ns | 52.900ns | 2.777ns | 1.35x | 36 (0.4%) |
| `definition (floor division)` | 4.839ns | 38.737ns | 38.968ns | 39.045ns | 58.115ns | 38.853ns | 0.668ns | 1.00x | 74 (0.7%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 22.651ns | 31.170ns | 31.249ns | 31.348ns | 66.645ns | 31.312ns | 0.495ns | 23.80x | 41 (0.4%) |
| `fmod (local)` | 7.621ns | 29.571ns | 29.597ns | 29.629ns | 92.472ns | 29.623ns | 1.141ns | 22.54x | 38 (0.4%) |
| `branchy` | 2.938ns | 3.553ns | 3.553ns | 3.554ns | 5.048ns | 3.554ns | 0.026ns | 2.71x | 47 (0.5%) |
| `branchless` | 1.851ns | 3.553ns | 3.553ns | 3.554ns | 5.235ns | 3.551ns | 0.042ns | 2.71x | 139 (1.4%) |
| `definition (math.floor)` | 1.264ns | 1.313ns | 1.313ns | 1.314ns | 1.394ns | 1.314ns | 0.003ns | 1.00x | 248 (2.5%) |
| `definition (floor division)` | - | - | - | - | - | - | - | - | - |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 20.920ns | 29.421ns | 29.468ns | 29.512ns | 142.978ns | 29.498ns | 1.901ns | 1.18x | 22 (0.2%) |
| `fmod (local)` | 19.297ns | 24.837ns | 24.899ns | 24.955ns | 48.311ns | 24.893ns | 0.341ns | 1.00x | 45 (0.4%) |
| `branchy` | 0.647ns | 29.368ns | 29.388ns | 29.407ns | 313.325ns | 29.509ns | 4.977ns | 1.18x | 16 (0.2%) |
| `branchless` | 10.334ns | 34.848ns | 34.929ns | 35.005ns | 42.660ns | 34.910ns | 0.513ns | 1.40x | 46 (0.5%) |
| `definition (math.floor)` | 20.355ns | 28.405ns | 28.417ns | 28.430ns | 170.401ns | 28.462ns | 1.901ns | 1.14x | 15 (0.1%) |
| `definition (floor division)` | - | - | - | - | - | - | - | - | - |

## ipairs iteration

#### One-Time Setup
```lua
local nxt, lipairs, lpairs = next, ipairs, pairs
local len = 100
local a = { n = len, [0] = len }
for i = 1, len do
	a[i] = i
end
```

| Test | Code |
|------|------|
| `ipairs (global)` | `for k, v in ipairs(a) do out = v end` |
| `ipairs (local)` | `for k, v in lipairs(a) do out = v end` |
| `pairs (global)` | `for k, v in pairs(a) do out = v end` |
| `pairs (local)` | `for k, v in lpairs(a) do out = v end` |
| `next (global)` | `for k, v in next, a do out = v end` |
| `next (local)` | `for k, v in nxt, a do out = v end` |
| `local len` | `for i = 1, len do out = a[i] end` |
| `table.n` | `for i = 1, a.n do out = a[i] end` |
| `table[0]` | `for i = 1, a[0] do out = a[i] end` |
| `#table` | `for i = 1, #a do out = a[i] end` |
| `constant` | `for i = 1, 100 do out = a[i] end` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs (global)` | 2.067µs | 3.700µs | 3.721µs | 3.745µs | 11.505µs | 3.722µs | 93.178ns | 2.62x | 37 (0.4%) |
| `ipairs (local)` | 191.608ns | 3.756µs | 3.763µs | 3.773µs | 21.343µs | 3.765µs | 224.034ns | 2.65x | 38 (0.4%) |
| `pairs (global)` | 211.337ns | 3.642µs | 3.644µs | 3.648µs | 8.693µs | 3.644µs | 87.290ns | 2.57x | 40 (0.4%) |
| `pairs (local)` | 944.935ns | 3.633µs | 3.636µs | 3.639µs | 20.363µs | 3.638µs | 207.260ns | 2.56x | 13 (0.1%) |
| `next (global)` | 60.696ns | 3.631µs | 3.634µs | 3.639µs | 16.337µs | 3.637µs | 181.129ns | 2.56x | 30 (0.3%) |
| `next (local)` | 1.597µs | 3.611µs | 3.614µs | 3.617µs | 4.077µs | 3.613µs | 31.082ns | 2.55x | 61 (0.6%) |
| `local len` | 216.874ns | 1.394µs | 1.419µs | 1.439µs | 6.827µs | 1.419µs | 98.008ns | 1.00x | 30 (0.3%) |
| `table.n` | 873.473ns | 1.414µs | 1.428µs | 1.447µs | 7.707µs | 1.430µs | 69.715ns | 1.01x | 20 (0.2%) |
| `table[0]` | 711.322ns | 1.406µs | 1.437µs | 1.461µs | 6.017µs | 1.436µs | 95.917ns | 1.01x | 23 (0.2%) |
| `#table` | 697.214ns | 1.401µs | 1.426µs | 1.436µs | 2.516µs | 1.419µs | 32.805ns | 1.01x | 37 (0.4%) |
| `constant` | 423.867ns | 1.396µs | 1.419µs | 1.440µs | 7.640µs | 1.419µs | 80.117ns | 1.00x | 21 (0.2%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs (global)` | 1.523µs | 3.942µs | 3.955µs | 3.965µs | 5.563µs | 3.952µs | 58.410ns | 2.58x | 39 (0.4%) |
| `ipairs (local)` | 1.538µs | 3.913µs | 3.937µs | 3.956µs | 9.461µs | 3.934µs | 84.798ns | 2.57x | 56 (0.6%) |
| `pairs (global)` | 2.007µs | 3.534µs | 3.537µs | 3.540µs | 16.815µs | 3.540µs | 213.980ns | 2.31x | 14 (0.1%) |
| `pairs (local)` | 77.842ns | 3.525µs | 3.527µs | 3.530µs | 6.007µs | 3.526µs | 62.946ns | 2.30x | 37 (0.4%) |
| `next (global)` | 507.144ns | 3.506µs | 3.509µs | 3.512µs | 15.761µs | 3.511µs | 197.944ns | 2.29x | 31 (0.3%) |
| `next (local)` | 416.304ns | 3.498µs | 3.501µs | 3.505µs | 10.180µs | 3.501µs | 88.181ns | 2.28x | 40 (0.4%) |
| `local len` | 416.644ns | 1.524µs | 1.557µs | 1.589µs | 4.157µs | 1.557µs | 68.082ns | 1.02x | 29 (0.3%) |
| `table.n` | 499.108ns | 1.531µs | 1.532µs | 1.534µs | 6.031µs | 1.532µs | 69.708ns | 1.00x | 19 (0.2%) |
| `table[0]` | 1.132µs | 1.555µs | 1.556µs | 1.557µs | 6.099µs | 1.557µs | 74.345ns | 1.02x | 27 (0.3%) |
| `#table` | 239.205ns | 1.544µs | 1.579µs | 1.607µs | 4.462µs | 1.578µs | 59.592ns | 1.03x | 27 (0.3%) |
| `constant` | 1.073µs | 1.524µs | 1.555µs | 1.588µs | 5.539µs | 1.556µs | 70.765ns | 1.01x | 24 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs (global)` | 1.274µs | 3.444µs | 3.448µs | 3.452µs | 12.413µs | 3.449µs | 152.200ns | 3.30x | 27 (0.3%) |
| `ipairs (local)` | 2.000µs | 3.166µs | 3.168µs | 3.170µs | 4.095µs | 3.166µs | 39.302ns | 3.03x | 75 (0.8%) |
| `pairs (global)` | 1.014µs | 3.102µs | 3.107µs | 3.112µs | 10.411µs | 3.109µs | 126.132ns | 2.97x | 30 (0.3%) |
| `pairs (local)` | 1.954µs | 3.096µs | 3.100µs | 3.105µs | 12.463µs | 3.102µs | 127.111ns | 2.97x | 32 (0.3%) |
| `next (global)` | 8.581ns | 3.080µs | 3.086µs | 3.092µs | 15.660µs | 3.088µs | 161.220ns | 2.95x | 25 (0.3%) |
| `next (local)` | 281.480ns | 3.072µs | 3.078µs | 3.084µs | 3.434µs | 3.076µs | 60.618ns | 2.94x | 54 (0.5%) |
| `local len` | 309.941ns | 1.046µs | 1.046µs | 1.046µs | 5.637µs | 1.047µs | 57.539ns | 1.00x | 18 (0.2%) |
| `table.n` | 31.128ns | 1.121µs | 1.121µs | 1.122µs | 4.996µs | 1.121µs | 42.544ns | 1.07x | 19 (0.2%) |
| `table[0]` | 428.415ns | 1.051µs | 1.051µs | 1.051µs | 4.771µs | 1.052µs | 56.843ns | 1.01x | 32 (0.3%) |
| `#table` | 837.772ns | 1.167µs | 1.168µs | 1.168µs | 3.344µs | 1.168µs | 27.326ns | 1.12x | 37 (0.4%) |
| `constant` | 164.996ns | 1.045µs | 1.045µs | 1.046µs | 5.471µs | 1.046µs | 59.235ns | 1.00x | 25 (0.3%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs (global)` | 1.516µs | 2.829µs | 2.832µs | 2.836µs | 8.738µs | 2.832µs | 80.917ns | 2.98x | 47 (0.5%) |
| `ipairs (local)` | 1.694µs | 2.825µs | 2.829µs | 2.832µs | 11.189µs | 2.830µs | 142.830ns | 2.98x | 22 (0.2%) |
| `pairs (global)` | 977.214ns | 3.113µs | 3.134µs | 3.165µs | 19.494µs | 3.139µs | 203.546ns | 3.30x | 19 (0.2%) |
| `pairs (local)` | 2.162µs | 3.105µs | 3.130µs | 3.166µs | 17.957µs | 3.137µs | 235.255ns | 3.29x | 16 (0.2%) |
| `next (global)` | 938.404ns | 3.113µs | 3.151µs | 3.186µs | 5.230µs | 3.148µs | 80.723ns | 3.32x | 55 (0.5%) |
| `next (local)` | 223.430ns | 3.099µs | 3.129µs | 3.161µs | 14.751µs | 3.132µs | 172.731ns | 3.29x | 18 (0.2%) |
| `local len` | 331.751ns | 950.446ns | 950.734ns | 951.084ns | 5.382µs | 951.178ns | 53.406ns | 1.00x | 16 (0.2%) |
| `table.n` | 234.696ns | 953.680ns | 954.055ns | 954.503ns | 3.741µs | 954.197ns | 35.147ns | 1.00x | 29 (0.3%) |
| `table[0]` | 600.339ns | 959.160ns | 959.488ns | 959.860ns | 5.843µs | 960.145ns | 54.784ns | 1.01x | 22 (0.2%) |
| `#table` | 607.395ns | 957.582ns | 958.084ns | 958.589ns | 3.763µs | 958.377ns | 36.337ns | 1.01x | 27 (0.3%) |
| `constant` | 295.286ns | 949.690ns | 949.909ns | 950.149ns | 3.887µs | 949.994ns | 32.903ns | 1.00x | 31 (0.3%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs (global)` | 131.900ns | 135.295ns | 135.322ns | 135.351ns | 141.495ns | 135.343ns | 0.307ns | 1.94x | 253 (2.5%) |
| `ipairs (local)` | 127.919ns | 134.116ns | 134.136ns | 134.161ns | 141.712ns | 134.159ns | 0.297ns | 1.92x | 266 (2.7%) |
| `pairs (global)` | 49.460ns | 337.163ns | 337.473ns | 337.620ns | 939.184ns | 337.744ns | 13.139ns | 4.83x | 32 (0.3%) |
| `pairs (local)` | 805.961ns | 917.090ns | 917.945ns | 918.814ns | 1.032µs | 917.908ns | 4.968ns | 13.13x | 119 (1.2%) |
| `next (global)` | 177.823ns | 365.928ns | 366.561ns | 367.194ns | 921.265ns | 366.775ns | 12.141ns | 5.24x | 23 (0.2%) |
| `next (local)` | 699.979ns | 912.086ns | 912.946ns | 914.038ns | 1.369µs | 913.098ns | 9.670ns | 13.06x | 43 (0.4%) |
| `local len` | 41.421ns | 74.719ns | 74.756ns | 74.795ns | 85.873ns | 74.772ns | 0.428ns | 1.07x | 48 (0.5%) |
| `table.n` | 71.773ns | 74.300ns | 74.442ns | 74.556ns | 123.890ns | 74.445ns | 0.600ns | 1.06x | 15 (0.1%) |
| `table[0]` | 72.382ns | 74.619ns | 74.679ns | 74.728ns | 144.716ns | 74.690ns | 0.744ns | 1.07x | 16 (0.2%) |
| `#table` | 78.590ns | 82.044ns | 83.004ns | 83.736ns | 89.221ns | 82.874ns | 1.070ns | 1.19x | 26 (0.3%) |
| `constant` | 29.160ns | 69.847ns | 69.906ns | 69.961ns | 124.558ns | 69.929ns | 0.730ns | 1.00x | 11 (0.1%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs (global)` | 584.937ns | 1.166µs | 1.168µs | 1.170µs | 6.766µs | 1.168µs | 57.201ns | 2.79x | 14 (0.1%) |
| `ipairs (local)` | 912.668ns | 1.165µs | 1.166µs | 1.167µs | 5.552µs | 1.167µs | 63.527ns | 2.79x | 10 (0.1%) |
| `pairs (global)` | 296.224ns | 425.368ns | 426.472ns | 427.651ns | 1.001µs | 426.405ns | 7.777ns | 1.02x | 44 (0.4%) |
| `pairs (local)` | 354.633ns | 1.382µs | 1.383µs | 1.384µs | 8.539µs | 1.384µs | 80.408ns | 3.31x | 12 (0.1%) |
| `next (global)` | 215.298ns | 417.722ns | 418.342ns | 419.207ns | 1.792µs | 418.484ns | 15.013ns | 1.00x | 24 (0.2%) |
| `next (local)` | 181.574ns | 1.376µs | 1.376µs | 1.377µs | 4.815µs | 1.376µs | 39.501ns | 3.29x | 29 (0.3%) |
| `local len` | 282.823ns | 603.914ns | 604.829ns | 605.825ns | 786.006ns | 604.486ns | 8.141ns | 1.45x | 100 (1.0%) |
| `table.n` | 171.296ns | 605.702ns | 608.432ns | 610.588ns | 3.361µs | 608.639ns | 44.062ns | 1.45x | 10 (0.1%) |
| `table[0]` | 66.002ns | 606.697ns | 607.716ns | 608.706ns | 782.763ns | 607.364ns | 8.319ns | 1.45x | 69 (0.7%) |
| `#table` | 138.675ns | 605.509ns | 609.609ns | 616.028ns | 4.234µs | 611.858ns | 54.084ns | 1.46x | 9 (0.1%) |
| `constant` | 197.491ns | 604.937ns | 605.643ns | 606.341ns | 4.038µs | 605.682ns | 39.956ns | 1.45x | 9 (0.1%) |

## local vs global index

#### One-Time Setup
```lua
local s = math.sin
```

| Test | Code |
|------|------|
| `local` | `out = s(3.14)` |
| `global` | `out = math.sin(3.14)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 21.870ns | 37.649ns | 37.660ns | 37.675ns | 226.596ns | 37.688ns | 2.124ns | 1.00x | 16 (0.2%) |
| `global` | 12.293ns | 50.223ns | 50.314ns | 50.382ns | 202.537ns | 50.302ns | 2.066ns | 1.34x | 16 (0.2%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 7.217ns | 37.903ns | 38.085ns | 38.266ns | 236.868ns | 38.110ns | 2.520ns | 1.00x | 8 (0.1%) |
| `global` | 4.577ns | 55.960ns | 56.144ns | 56.333ns | 214.148ns | 56.159ns | 1.948ns | 1.47x | 30 (0.3%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 9.527ns | 37.765ns | 37.822ns | 37.877ns | 142.106ns | 37.827ns | 1.553ns | 1.00x | 32 (0.3%) |
| `global` | 17.161ns | 54.053ns | 54.155ns | 54.221ns | 246.178ns | 54.141ns | 2.311ns | 1.43x | 32 (0.3%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 10.749ns | 34.804ns | 34.925ns | 35.057ns | 186.051ns | 34.977ns | 2.504ns | 1.00x | 29 (0.3%) |
| `global` | 7.231ns | 46.904ns | 46.960ns | 47.023ns | 176.162ns | 46.945ns | 1.498ns | 1.34x | 30 (0.3%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 0.285ns | 0.296ns | 0.296ns | 0.296ns | 0.391ns | 0.296ns | 0.001ns | 1.00x | 132 (1.3%) |
| `global` | 0.275ns | 0.296ns | 0.296ns | 0.296ns | 0.322ns | 0.296ns | 0.001ns | 1.00x | 191 (1.9%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 5.110ns | 16.030ns | 16.038ns | 16.047ns | 92.265ns | 16.037ns | 0.793ns | 1.00x | 19 (0.2%) |
| `global` | 8.881ns | 20.793ns | 20.813ns | 20.832ns | 134.079ns | 20.828ns | 1.464ns | 1.30x | 14 (0.1%) |

## local vs global vs upvalue

#### One-Time Setup
```lua
local t_upvalue = type
```

#### Per Iteration Setup
```lua
local t_local = type
```

| Test | Code |
|------|------|
| `local` | `out = t_local(3)` |
| `upvalue` | `out = t_upvalue(3)` |
| `global` | `out = type(3)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 10.145ns | 45.261ns | 45.317ns | 45.363ns | 259.491ns | 45.334ns | 2.273ns | 1.00x | 14 (0.1%) |
| `upvalue` | 6.546ns | 45.320ns | 45.414ns | 45.494ns | 248.301ns | 45.452ns | 2.506ns | 1.00x | 17 (0.2%) |
| `global` | 16.524ns | 50.916ns | 51.177ns | 51.409ns | 104.982ns | 51.154ns | 0.884ns | 1.13x | 45 (0.4%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 28.827ns | 50.098ns | 50.158ns | 50.203ns | 125.746ns | 50.137ns | 1.219ns | 1.01x | 35 (0.4%) |
| `upvalue` | 20.011ns | 49.806ns | 49.862ns | 49.912ns | 199.259ns | 49.872ns | 2.012ns | 1.00x | 17 (0.2%) |
| `global` | 4.507ns | 57.822ns | 57.934ns | 58.046ns | 199.226ns | 57.964ns | 2.706ns | 1.16x | 38 (0.4%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 9.159ns | 34.918ns | 34.941ns | 34.964ns | 70.200ns | 34.914ns | 0.774ns | 1.01x | 65 (0.7%) |
| `upvalue` | 9.269ns | 34.714ns | 34.732ns | 34.754ns | 156.609ns | 34.761ns | 2.104ns | 1.00x | 32 (0.3%) |
| `global` | 1.789ns | 41.367ns | 41.388ns | 41.409ns | 155.850ns | 41.368ns | 1.501ns | 1.19x | 47 (0.5%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 2.051ns | 32.191ns | 32.237ns | 32.288ns | 238.439ns | 32.244ns | 2.797ns | 1.00x | 14 (0.1%) |
| `upvalue` | 11.447ns | 32.061ns | 32.307ns | 32.440ns | 213.639ns | 32.264ns | 2.532ns | 1.00x | 12 (0.1%) |
| `global` | 10.904ns | 36.901ns | 36.974ns | 37.030ns | 73.775ns | 36.941ns | 0.784ns | 1.15x | 71 (0.7%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 0.196ns | 0.296ns | 0.296ns | 0.296ns | 0.622ns | 0.296ns | 0.004ns | 1.00x | 13 (0.1%) |
| `upvalue` | 0.254ns | 0.296ns | 0.296ns | 0.296ns | 0.351ns | 0.296ns | 0.001ns | 1.00x | 124 (1.2%) |
| `global` | 0.026ns | 0.296ns | 0.296ns | 0.296ns | 0.351ns | 0.296ns | 0.003ns | 1.00x | 19 (0.2%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 2.559ns | 11.497ns | 11.501ns | 11.505ns | 67.578ns | 11.507ns | 0.646ns | 1.01x | 29 (0.3%) |
| `upvalue` | 2.929ns | 11.412ns | 11.417ns | 11.423ns | 82.270ns | 11.432ns | 1.114ns | 1.00x | 8 (0.1%) |
| `global` | 5.734ns | 11.938ns | 11.941ns | 11.945ns | 93.625ns | 11.963ns | 1.162ns | 1.05x | 7 (0.1%) |

## localized method

#### One-Time Setup
```lua
local class = {
	test = function(self) return 1 end,
}
local ltest = class.test
```

| Test | Code |
|------|------|
| `none` | `out = class:test(); out = class:test(); out = class:test()` |
| `inside loop` | `local test = class.test; out = test(class); out = test(class); out = test(class)` |
| `outside loop` | `out = ltest(class); out = ltest(class); out = ltest(class)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 45.695ns | 106.625ns | 106.930ns | 107.177ns | 478.729ns | 107.021ns | 6.319ns | 1.20x | 17 (0.2%) |
| `inside loop` | 35.730ns | 97.373ns | 97.650ns | 97.929ns | 114.015ns | 97.603ns | 1.268ns | 1.10x | 53 (0.5%) |
| `outside loop` | 22.714ns | 89.038ns | 89.175ns | 89.296ns | 334.204ns | 89.216ns | 3.925ns | 1.00x | 24 (0.2%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 1.686ns | 129.667ns | 131.021ns | 132.377ns | 550.701ns | 131.446ns | 7.413ns | 1.16x | 19 (0.2%) |
| `inside loop` | 31.318ns | 118.738ns | 120.055ns | 121.917ns | 320.777ns | 120.481ns | 4.379ns | 1.06x | 51 (0.5%) |
| `outside loop` | 49.111ns | 111.708ns | 113.053ns | 115.167ns | 475.407ns | 113.582ns | 7.101ns | 1.00x | 26 (0.3%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 60.040ns | 113.678ns | 114.888ns | 115.862ns | 453.746ns | 114.656ns | 4.629ns | 1.18x | 35 (0.4%) |
| `inside loop` | 33.709ns | 104.187ns | 105.356ns | 106.017ns | 379.452ns | 105.020ns | 5.153ns | 1.08x | 25 (0.3%) |
| `outside loop` | 35.764ns | 96.728ns | 97.627ns | 98.332ns | 279.747ns | 97.423ns | 4.112ns | 1.00x | 69 (0.7%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 3.156ns | 97.730ns | 98.082ns | 98.380ns | 228.654ns | 98.034ns | 2.754ns | 1.16x | 32 (0.3%) |
| `inside loop` | 29.030ns | 86.347ns | 86.646ns | 86.875ns | 392.909ns | 86.607ns | 3.712ns | 1.02x | 20 (0.2%) |
| `outside loop` | 35.131ns | 84.496ns | 84.734ns | 85.018ns | 292.093ns | 84.769ns | 2.811ns | 1.00x | 35 (0.4%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 0.281ns | 0.296ns | 0.296ns | 0.296ns | 0.551ns | 0.296ns | 0.003ns | 1.00x | 16 (0.2%) |
| `inside loop` | 0.047ns | 0.296ns | 0.296ns | 0.296ns | 0.583ns | 0.296ns | 0.004ns | 1.00x | 18 (0.2%) |
| `outside loop` | 0.276ns | 0.296ns | 0.296ns | 0.296ns | 0.334ns | 0.296ns | 0.001ns | 1.00x | 193 (1.9%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 13.265ns | 41.627ns | 41.655ns | 41.685ns | 203.839ns | 41.715ns | 2.806ns | 1.20x | 24 (0.2%) |
| `inside loop` | 26.776ns | 38.544ns | 38.594ns | 38.645ns | 49.900ns | 38.586ns | 0.477ns | 1.11x | 78 (0.8%) |
| `outside loop` | 2.228ns | 34.797ns | 34.847ns | 34.898ns | 267.307ns | 34.903ns | 3.631ns | 1.00x | 7 (0.1%) |

## math.max

#### One-Time Setup
```lua
local max, x, y = math.max, 1, 100
```

| Test | Code |
|------|------|
| `math.max (global)` | `out = math.max(x, y)` |
| `math.max (local)` | `out = max(x, y)` |
| `if-else` | `if x > y then out = x else out = y end` |
| `branchless` | `out = x > y and x or y` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 4.623ns | 48.845ns | 48.955ns | 49.083ns | 58.067ns | 48.941ns | 0.732ns | 3.09x | 74 (0.7%) |
| `math.max (local)` | 3.032ns | 35.041ns | 35.245ns | 35.445ns | 184.104ns | 35.290ns | 2.646ns | 2.22x | 16 (0.2%) |
| `if-else` | 11.178ns | 15.730ns | 15.843ns | 16.009ns | 50.609ns | 15.817ns | 0.534ns | 1.00x | 32 (0.3%) |
| `branchless` | 7.602ns | 15.742ns | 15.844ns | 16.020ns | 87.365ns | 15.854ns | 1.312ns | 1.00x | 13 (0.1%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 29.939ns | 56.477ns | 56.667ns | 56.848ns | 172.808ns | 56.643ns | 1.426ns | 2.65x | 42 (0.4%) |
| `math.max (local)` | 7.321ns | 38.147ns | 38.203ns | 38.246ns | 175.379ns | 38.207ns | 1.990ns | 1.78x | 28 (0.3%) |
| `if-else` | 13.248ns | 20.546ns | 21.419ns | 22.599ns | 28.648ns | 21.604ns | 1.622ns | 1.00x | 60 (0.6%) |
| `branchless` | 2.769ns | 26.158ns | 26.558ns | 26.912ns | 121.260ns | 26.523ns | 1.709ns | 1.24x | 20 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 7.538ns | 49.009ns | 49.029ns | 49.050ns | 225.260ns | 49.042ns | 2.594ns | 2.76x | 25 (0.3%) |
| `math.max (local)` | 8.063ns | 32.718ns | 32.730ns | 32.746ns | 46.165ns | 32.710ns | 0.528ns | 1.84x | 61 (0.6%) |
| `if-else` | 2.088ns | 17.766ns | 17.775ns | 17.787ns | 104.306ns | 17.792ns | 1.141ns | 1.00x | 25 (0.3%) |
| `branchless` | 4.061ns | 17.765ns | 17.774ns | 17.785ns | 105.474ns | 17.777ns | 0.926ns | 1.00x | 21 (0.2%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 10.569ns | 37.918ns | 38.230ns | 38.553ns | 42.816ns | 38.258ns | 0.755ns | 3.07x | 50 (0.5%) |
| `math.max (local)` | 11.387ns | 31.085ns | 31.797ns | 32.443ns | 244.064ns | 31.835ns | 3.314ns | 2.56x | 11 (0.1%) |
| `if-else` | 1.060ns | 12.436ns | 12.438ns | 12.441ns | 67.782ns | 12.444ns | 0.655ns | 1.00x | 24 (0.2%) |
| `branchless` | 0.010ns | 12.436ns | 12.438ns | 12.441ns | 58.515ns | 12.438ns | 0.531ns | 1.00x | 33 (0.3%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 2.864ns | 2.961ns | 2.961ns | 2.962ns | 3.359ns | 2.962ns | 0.008ns | 10.00x | 185 (1.8%) |
| `math.max (local)` | 0.273ns | 0.296ns | 0.296ns | 0.296ns | 0.331ns | 0.296ns | 0.001ns | 1.00x | 154 (1.5%) |
| `if-else` | 0.254ns | 0.296ns | 0.296ns | 0.296ns | 0.331ns | 0.296ns | 0.001ns | 1.00x | 166 (1.7%) |
| `branchless` | 0.065ns | 0.296ns | 0.296ns | 0.296ns | 0.493ns | 0.296ns | 0.003ns | 1.00x | 15 (0.1%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 3.290ns | 15.833ns | 15.845ns | 15.858ns | 41.277ns | 15.842ns | 0.320ns | 2.03x | 32 (0.3%) |
| `math.max (local)` | 3.145ns | 12.045ns | 12.094ns | 12.135ns | 46.640ns | 12.097ns | 0.466ns | 1.55x | 16 (0.2%) |
| `if-else` | 3.520ns | 7.791ns | 7.798ns | 7.802ns | 9.699ns | 7.795ns | 0.114ns | 1.00x | 77 (0.8%) |
| `branchless` | 3.693ns | 7.791ns | 7.798ns | 7.802ns | 54.050ns | 7.803ns | 0.525ns | 1.00x | 19 (0.2%) |

## math.max of 3 numbers

#### One-Time Setup
```lua
local max, x, y, z = math.max, 1, 100, 55
```

| Test | Code |
|------|------|
| `math.max (global)` | `out = math.max(x, y, z)` |
| `math.max (local)` | `out = max(x, y, z)` |
| `if-else` | `if x > y and x > z then out = x elseif y > z and y > x then out = y else out = z end` |
| `branchless` | `out = (x > y and x > z and x) or (y > z and y > x and y) or (z)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 24.398ns | 54.836ns | 55.104ns | 55.389ns | 328.579ns | 55.182ns | 4.162ns | 1.45x | 11 (0.1%) |
| `math.max (local)` | 10.579ns | 41.233ns | 41.419ns | 41.572ns | 116.756ns | 41.402ns | 1.302ns | 1.09x | 28 (0.3%) |
| `if-else` | 5.709ns | 37.869ns | 37.907ns | 38.028ns | 248.258ns | 37.962ns | 2.677ns | 1.00x | 13 (0.1%) |
| `branchless` | 27.240ns | 39.599ns | 39.681ns | 39.691ns | 157.718ns | 39.611ns | 1.384ns | 1.05x | 27 (0.3%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 4.696ns | 63.954ns | 64.243ns | 64.554ns | 433.120ns | 64.292ns | 5.218ns | 1.42x | 10 (0.1%) |
| `math.max (local)` | 19.462ns | 44.905ns | 45.097ns | 45.305ns | 312.789ns | 45.089ns | 2.778ns | 1.00x | 13 (0.1%) |
| `if-else` | 18.710ns | 47.857ns | 48.670ns | 49.821ns | 298.108ns | 49.219ns | 4.218ns | 1.08x | 35 (0.4%) |
| `branchless` | 11.909ns | 50.336ns | 51.282ns | 52.349ns | 115.815ns | 51.424ns | 2.327ns | 1.14x | 64 (0.6%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 3.792ns | 54.809ns | 54.859ns | 54.912ns | 271.266ns | 54.880ns | 2.994ns | 1.36x | 20 (0.2%) |
| `math.max (local)` | 7.036ns | 40.191ns | 40.229ns | 40.372ns | 107.891ns | 40.230ns | 1.134ns | 1.00x | 61 (0.6%) |
| `if-else` | 14.262ns | 40.377ns | 40.391ns | 40.406ns | 244.160ns | 40.417ns | 2.732ns | 1.00x | 25 (0.3%) |
| `branchless` | 4.888ns | 41.843ns | 41.858ns | 41.875ns | 116.031ns | 41.853ns | 1.205ns | 1.04x | 39 (0.4%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 26.475ns | 48.856ns | 49.220ns | 49.556ns | 240.467ns | 49.232ns | 2.924ns | 1.77x | 21 (0.2%) |
| `math.max (local)` | 10.439ns | 42.080ns | 42.345ns | 42.535ns | 90.857ns | 42.182ns | 1.072ns | 1.52x | 73 (0.7%) |
| `if-else` | 12.047ns | 27.828ns | 27.853ns | 27.892ns | 144.138ns | 27.885ns | 1.502ns | 1.00x | 25 (0.3%) |
| `branchless` | 5.739ns | 30.197ns | 30.207ns | 30.214ns | 84.158ns | 30.201ns | 0.911ns | 1.08x | 34 (0.3%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 2.411ns | 2.961ns | 2.961ns | 2.962ns | 5.418ns | 2.962ns | 0.027ns | 10.00x | 15 (0.1%) |
| `math.max (local)` | 0.238ns | 0.296ns | 0.296ns | 0.296ns | 0.351ns | 0.296ns | 0.002ns | 1.00x | 173 (1.7%) |
| `if-else` | 0.189ns | 0.296ns | 0.296ns | 0.296ns | 0.612ns | 0.296ns | 0.004ns | 1.00x | 23 (0.2%) |
| `branchless` | 0.266ns | 0.296ns | 0.296ns | 0.296ns | 0.359ns | 0.296ns | 0.001ns | 1.00x | 151 (1.5%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 0.856ns | 16.848ns | 16.868ns | 16.890ns | 77.247ns | 16.875ns | 0.885ns | 1.32x | 27 (0.3%) |
| `math.max (local)` | 4.422ns | 12.755ns | 12.769ns | 12.785ns | 133.312ns | 12.790ns | 1.557ns | 1.00x | 3 (0.0%) |
| `if-else` | 12.155ns | 17.407ns | 17.445ns | 17.496ns | 107.049ns | 17.469ns | 1.093ns | 1.37x | 18 (0.2%) |
| `branchless` | 5.923ns | 17.140ns | 17.152ns | 17.165ns | 125.457ns | 17.168ns | 1.229ns | 1.34x | 20 (0.2%) |

## select

#### One-Time Setup
```lua
local function fn()
	return 1, 2, 3, 4
end
local sel = select
```

| Test | Code |
|------|------|
| `argument expanision` | `local _; _, _, _, out = fn()` |
| `select (global)` | `out = select(4, fn())` |
| `select (local)` | `out = sel(4, fn())` |
| `table` | `out = ({ fn() })[4]` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 14.050ns | 43.306ns | 43.528ns | 43.694ns | 54.717ns | 43.471ns | 0.744ns | 1.00x | 35 (0.4%) |
| `select (global)` | 24.040ns | 66.247ns | 66.663ns | 67.055ns | 252.738ns | 66.633ns | 3.165ns | 1.53x | 67 (0.7%) |
| `select (local)` | 17.265ns | 59.711ns | 60.207ns | 60.651ns | 167.571ns | 60.188ns | 1.797ns | 1.38x | 43 (0.4%) |
| `table` | 93.150ns | 122.538ns | 129.631ns | 134.800ns | 394.699ns | 129.457ns | 9.995ns | 2.98x | 52 (0.5%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 19.261ns | 58.250ns | 58.720ns | 59.475ns | 233.032ns | 58.899ns | 3.499ns | 1.00x | 39 (0.4%) |
| `select (global)` | 57.279ns | 75.047ns | 75.310ns | 75.593ns | 219.136ns | 75.324ns | 2.004ns | 1.28x | 42 (0.4%) |
| `select (local)` | 30.363ns | 74.361ns | 75.120ns | 75.894ns | 357.274ns | 75.192ns | 4.447ns | 1.28x | 25 (0.3%) |
| `table` | 56.069ns | 128.243ns | 130.737ns | 136.889ns | 418.556ns | 132.069ns | 10.420ns | 2.23x | 65 (0.7%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 3.378ns | 41.426ns | 41.462ns | 41.499ns | 164.493ns | 41.445ns | 2.011ns | 1.00x | 45 (0.4%) |
| `select (global)` | 5.230ns | 64.949ns | 65.092ns | 65.442ns | 328.879ns | 65.099ns | 3.132ns | 1.57x | 56 (0.6%) |
| `select (local)` | 11.805ns | 58.377ns | 58.493ns | 58.745ns | 282.275ns | 58.568ns | 3.305ns | 1.41x | 36 (0.4%) |
| `table` | 90.040ns | 121.890ns | 125.162ns | 131.453ns | 281.134ns | 126.799ns | 10.314ns | 3.02x | 117 (1.2%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 12.684ns | 38.938ns | 39.339ns | 39.701ns | 78.124ns | 39.322ns | 0.944ns | 1.00x | 61 (0.6%) |
| `select (global)` | 4.309ns | 54.432ns | 55.015ns | 55.637ns | 291.551ns | 55.070ns | 3.021ns | 1.40x | 22 (0.2%) |
| `select (local)` | 36.224ns | 53.076ns | 53.461ns | 53.877ns | 60.387ns | 53.472ns | 0.873ns | 1.36x | 82 (0.8%) |
| `table` | 60.623ns | 106.850ns | 116.822ns | 123.206ns | 339.308ns | 115.359ns | 13.107ns | 2.97x | 75 (0.8%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 0.278ns | 0.296ns | 0.296ns | 0.296ns | 0.352ns | 0.296ns | 0.001ns | 1.00x | 176 (1.8%) |
| `select (global)` | 1.597ns | 2.073ns | 2.073ns | 2.073ns | 2.353ns | 2.073ns | 0.008ns | 7.00x | 87 (0.9%) |
| `select (local)` | 0.280ns | 0.296ns | 0.296ns | 0.296ns | 0.310ns | 0.296ns | 0.001ns | 1.00x | 213 (2.1%) |
| `table` | 1.114µs | 6.850µs | 6.875µs | 6.902µs | 20.004µs | 6.882µs | 236.398ns | 23216.40x | 22 (0.2%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 2.757ns | 20.222ns | 20.230ns | 20.238ns | 102.326ns | 20.238ns | 1.286ns | 1.00x | 20 (0.2%) |
| `select (global)` | 9.617ns | 30.419ns | 30.466ns | 30.526ns | 160.421ns | 30.460ns | 1.355ns | 1.51x | 18 (0.2%) |
| `select (local)` | 7.418ns | 29.492ns | 29.514ns | 29.540ns | 139.114ns | 29.517ns | 1.260ns | 1.46x | 31 (0.3%) |
| `table` | 94.181ns | 98.877ns | 111.425ns | 155.750ns | 318.119ns | 122.553ns | 25.446ns | 5.51x | 40 (0.4%) |

## square

#### One-Time Setup
```lua
local x, pow = 10, math.pow
```

| Test | Code |
|------|------|
| `math.pow (global)` | `out = math.pow(x, 3)` |
| `math.pow (local)` | `out = pow(x, 3)` |
| `multiply` | `out = x * x * x` |
| `exponent` | `out = x ^ 3` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 2.893ns | 67.256ns | 67.514ns | 67.812ns | 298.917ns | 67.630ns | 4.682ns | 3.86x | 20 (0.2%) |
| `math.pow (local)` | 40.247ns | 54.331ns | 54.420ns | 54.506ns | 238.272ns | 54.436ns | 2.393ns | 3.11x | 15 (0.1%) |
| `multiply` | 4.386ns | 17.470ns | 17.472ns | 17.476ns | 94.838ns | 17.495ns | 1.212ns | 1.00x | 17 (0.2%) |
| `exponent` | 17.794ns | 25.762ns | 25.777ns | 25.791ns | 108.639ns | 25.776ns | 1.081ns | 1.48x | 33 (0.3%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 7.509ns | 75.888ns | 76.149ns | 76.383ns | 385.278ns | 76.467ns | 9.036ns | 3.62x | 36 (0.4%) |
| `math.pow (local)` | 38.364ns | 54.250ns | 54.389ns | 54.526ns | 152.180ns | 54.392ns | 1.285ns | 2.59x | 46 (0.5%) |
| `multiply` | 3.445ns | 21.022ns | 21.026ns | 21.029ns | 98.151ns | 21.023ns | 1.333ns | 1.00x | 33 (0.3%) |
| `exponent` | 10.143ns | 28.194ns | 28.203ns | 28.212ns | 105.517ns | 28.194ns | 0.948ns | 1.34x | 35 (0.4%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 13.569ns | 73.715ns | 73.871ns | 74.019ns | 187.601ns | 73.811ns | 1.668ns | 4.73x | 70 (0.7%) |
| `math.pow (local)` | 11.476ns | 59.819ns | 59.907ns | 59.986ns | 273.261ns | 59.937ns | 4.061ns | 3.84x | 20 (0.2%) |
| `multiply` | 2.860ns | 15.605ns | 15.611ns | 15.617ns | 66.570ns | 15.604ns | 0.581ns | 1.00x | 40 (0.4%) |
| `exponent` | 4.977ns | 31.855ns | 31.898ns | 31.976ns | 124.524ns | 31.936ns | 1.659ns | 2.04x | 22 (0.2%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 46.833ns | 64.204ns | 64.537ns | 64.945ns | 319.076ns | 64.677ns | 4.775ns | 4.04x | 13 (0.1%) |
| `math.pow (local)` | 30.423ns | 54.811ns | 55.320ns | 56.037ns | 215.214ns | 55.406ns | 1.994ns | 3.46x | 36 (0.4%) |
| `multiply` | 4.271ns | 15.924ns | 15.989ns | 16.027ns | 86.480ns | 16.002ns | 1.063ns | 1.00x | 15 (0.1%) |
| `exponent` | 10.643ns | 26.142ns | 26.244ns | 26.375ns | 63.009ns | 26.223ns | 0.540ns | 1.64x | 55 (0.5%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 2.522ns | 2.665ns | 2.665ns | 2.666ns | 2.946ns | 2.666ns | 0.008ns | 9.00x | 206 (2.1%) |
| `math.pow (local)` | 0.241ns | 0.296ns | 0.296ns | 0.296ns | 0.426ns | 0.296ns | 0.002ns | 1.00x | 101 (1.0%) |
| `multiply` | 0.281ns | 0.296ns | 0.296ns | 0.296ns | 0.341ns | 0.296ns | 0.001ns | 1.00x | 174 (1.7%) |
| `exponent` | 0.007ns | 0.296ns | 0.296ns | 0.296ns | 0.523ns | 0.296ns | 0.004ns | 1.00x | 10 (0.1%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 24.817ns | 32.556ns | 32.565ns | 32.574ns | 38.152ns | 32.556ns | 0.246ns | 3.78x | 124 (1.2%) |
| `math.pow (local)` | 6.719ns | 28.700ns | 28.739ns | 28.778ns | 118.529ns | 28.731ns | 1.294ns | 3.34x | 16 (0.2%) |
| `multiply` | 2.406ns | 8.607ns | 8.616ns | 8.623ns | 10.402ns | 8.614ns | 0.125ns | 1.00x | 143 (1.4%) |
| `exponent` | 10.121ns | 22.933ns | 22.939ns | 22.945ns | 85.530ns | 22.942ns | 1.117ns | 2.66x | 24 (0.2%) |

## string concatenation

#### One-Time Setup
```lua
local bs = string.rep("---------", 127)
local t = { bs, bs, bs, bs, bs, bs, bs, bs, bs, bs }
local concat, format = table.concat, string.format
```

| Test | Code |
|------|------|
| `all-in-one` | `out = bs .. bs .. bs .. bs .. bs .. bs .. bs .. bs .. bs .. bs` |
| `separated` | `out = bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs;` |
| `loop` | `out = bs; for i = 1, 9 do out = out .. bs end` |
| `format` | `out = format("%s%s%s%s%s%s%s%s%s%s", bs, bs, bs, bs, bs, bs, bs, bs, bs, bs)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 266.940ns | 406.659ns | 409.848ns | 412.809ns | 896.872ns | 409.836ns | 9.094ns | 1.00x | 32 (0.3%) |
| `separated` | 2.703µs | 2.990µs | 2.995µs | 3.000µs | 3.731µs | 2.995µs | 15.074ns | 7.31x | 116 (1.2%) |
| `loop` | 2.643µs | 3.085µs | 3.100µs | 3.115µs | 4.285µs | 3.101µs | 33.664ns | 7.56x | 42 (0.4%) |
| `format` | 895.911ns | 1.539µs | 1.549µs | 1.559µs | 3.172µs | 1.549µs | 24.981ns | 3.78x | 39 (0.4%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 233.590ns | 528.057ns | 538.041ns | 689.753ns | 3.723µs | 581.414ns | 112.350ns | 1.00x | 17 (0.2%) |
| `separated` | 1.370µs | 4.805µs | 5.329µs | 5.657µs | 18.354µs | 5.310µs | 940.123ns | 9.90x | 166 (1.7%) |
| `loop` | 761.700ns | 4.803µs | 5.320µs | 5.604µs | 18.321µs | 5.280µs | 917.893ns | 9.89x | 157 (1.6%) |
| `format` | 0.378ns | 1.719µs | 1.750µs | 1.813µs | 13.392µs | 1.959µs | 857.193ns | 3.25x | 702 (7.0%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 216.690ns | 486.424ns | 513.030ns | 590.734ns | 4.285µs | 535.691ns | 95.289ns | 1.00x | 87 (0.9%) |
| `separated` | 2.055µs | 4.948µs | 5.333µs | 5.640µs | 16.512µs | 5.443µs | 1.076µs | 10.40x | 122 (1.2%) |
| `loop` | 1.711µs | 5.185µs | 5.527µs | 5.791µs | 16.378µs | 5.650µs | 1.077µs | 10.77x | 116 (1.2%) |
| `format` | 628.386ns | 2.988µs | 3.117µs | 3.270µs | 9.249µs | 3.134µs | 536.306ns | 6.08x | 95 (0.9%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 2.586ns | 1.365µs | 1.393µs | 1.435µs | 4.314µs | 1.476µs | 367.419ns | 1.00x | 357 (3.6%) |
| `separated` | 1.406µs | 5.103µs | 5.464µs | 5.766µs | 15.093µs | 5.599µs | 1.169µs | 3.92x | 128 (1.3%) |
| `loop` | 1.247µs | 4.931µs | 5.320µs | 5.646µs | 17.106µs | 5.473µs | 1.196µs | 3.82x | 114 (1.1%) |
| `format` | 540.317ns | 2.661µs | 2.740µs | 2.819µs | 7.531µs | 2.727µs | 180.516ns | 1.97x | 124 (1.2%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 0.254ns | 0.296ns | 0.296ns | 0.296ns | 0.363ns | 0.296ns | 0.001ns | 1.00x | 150 (1.5%) |
| `separated` | 0.281ns | 0.296ns | 0.296ns | 0.296ns | 0.320ns | 0.296ns | 0.001ns | 1.00x | 210 (2.1%) |
| `loop` | 1.896µs | 1.989µs | 1.995µs | 2.000µs | 2.133µs | 1.995µs | 10.608ns | 6736.20x | 151 (1.5%) |
| `format` | 0.283ns | 0.296ns | 0.296ns | 0.296ns | 0.321ns | 0.296ns | 0.001ns | 1.00x | 193 (1.9%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 70.521ns | 356.781ns | 359.902ns | 363.433ns | 668.973ns | 360.283ns | 7.596ns | 1.00x | 20 (0.2%) |
| `separated` | 2.302µs | 2.545µs | 2.552µs | 2.559µs | 3.369µs | 2.552µs | 16.645ns | 7.09x | 60 (0.6%) |
| `loop` | 2.096µs | 2.561µs | 2.567µs | 2.572µs | 3.487µs | 2.567µs | 20.793ns | 7.13x | 49 (0.5%) |
| `format` | 134.486ns | 496.198ns | 498.517ns | 500.960ns | 1.158µs | 498.481ns | 9.634ns | 1.39x | 40 (0.4%) |

## table insert

#### One-Time Setup
```lua
local tinsert = table.insert
```

#### Per Iteration Setup
```lua
out = { [0] = 0, n = 0 }
local count = 1
```

| Test | Code |
|------|------|
| `table.insert (global)` | `table.insert(out, __i)` |
| `table.insert (local)` | `tinsert(out, __i)` |
| `loop parameter` | `out[__i] = __i` |
| `#table+1` | `out[#out + 1] = __i` |
| `table.n` | `out.n = out.n + 1; out[out.n] = __i` |
| `table[0]` | `out[0] = out[0] + 1; out[out[0]] = __i` |
| `lockstep parameter` | `out[count] = __i; count = count + 1` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert (global)` | 45.574ns | 93.193ns | 93.402ns | 93.622ns | 348.921ns | 93.477ns | 4.494ns | 5.49x | 23 (0.2%) |
| `table.insert (local)` | 28.535ns | 86.815ns | 87.102ns | 87.397ns | 207.435ns | 87.105ns | 2.168ns | 5.12x | 50 (0.5%) |
| `loop parameter` | 0.082ns | 16.727ns | 17.000ns | 17.303ns | 51.563ns | 17.033ns | 0.713ns | 1.00x | 25 (0.3%) |
| `#table+1` | 37.083ns | 74.048ns | 74.272ns | 74.513ns | 148.409ns | 74.297ns | 1.226ns | 4.37x | 33 (0.3%) |
| `table.n` | 17.784ns | 49.769ns | 49.863ns | 49.973ns | 154.352ns | 49.901ns | 1.680ns | 2.93x | 24 (0.2%) |
| `table[0]` | 29.942ns | 51.351ns | 51.480ns | 51.625ns | 160.369ns | 51.507ns | 1.249ns | 3.03x | 28 (0.3%) |
| `lockstep parameter` | 3.856ns | 20.491ns | 20.870ns | 21.187ns | 90.145ns | 20.861ns | 1.169ns | 1.23x | 18 (0.2%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert (global)` | 16.974ns | 110.222ns | 110.494ns | 110.785ns | 333.021ns | 110.559ns | 4.882ns | 6.53x | 49 (0.5%) |
| `table.insert (local)` | 29.495ns | 97.662ns | 98.099ns | 98.530ns | 214.078ns | 98.069ns | 2.015ns | 5.79x | 59 (0.6%) |
| `loop parameter` | 3.645ns | 16.867ns | 16.932ns | 16.995ns | 64.817ns | 16.950ns | 0.881ns | 1.00x | 34 (0.3%) |
| `#table+1` | 31.621ns | 75.971ns | 76.391ns | 76.797ns | 138.521ns | 76.356ns | 1.379ns | 4.51x | 60 (0.6%) |
| `table.n` | 7.886ns | 52.858ns | 52.935ns | 53.050ns | 218.956ns | 52.978ns | 2.257ns | 3.13x | 21 (0.2%) |
| `table[0]` | 55.567ns | 71.875ns | 71.930ns | 71.981ns | 169.143ns | 71.933ns | 1.419ns | 4.25x | 30 (0.3%) |
| `lockstep parameter` | 11.794ns | 21.168ns | 21.206ns | 21.251ns | 66.553ns | 21.232ns | 0.761ns | 1.25x | 39 (0.4%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert (global)` | 72.755ns | 100.195ns | 100.511ns | 100.764ns | 400.688ns | 100.529ns | 3.835ns | 6.54x | 16 (0.2%) |
| `table.insert (local)` | 24.939ns | 93.551ns | 93.813ns | 94.081ns | 373.350ns | 93.818ns | 3.986ns | 6.11x | 31 (0.3%) |
| `loop parameter` | 0.139ns | 15.272ns | 15.366ns | 15.477ns | 52.753ns | 15.409ns | 0.754ns | 1.00x | 28 (0.3%) |
| `#table+1` | 26.373ns | 72.964ns | 73.318ns | 73.613ns | 122.720ns | 73.273ns | 0.978ns | 4.77x | 54 (0.5%) |
| `table.n` | 17.733ns | 42.765ns | 43.015ns | 43.292ns | 145.903ns | 43.031ns | 1.735ns | 2.80x | 33 (0.3%) |
| `table[0]` | 10.451ns | 43.926ns | 44.092ns | 44.276ns | 123.185ns | 44.102ns | 1.086ns | 2.87x | 43 (0.4%) |
| `lockstep parameter` | 7.963ns | 19.505ns | 19.656ns | 19.883ns | 63.038ns | 19.720ns | 0.815ns | 1.28x | 32 (0.3%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert (global)` | 3.094ns | 56.689ns | 56.874ns | 57.079ns | 353.102ns | 56.946ns | 4.460ns | 4.84x | 12 (0.1%) |
| `table.insert (local)` | 7.648ns | 48.365ns | 48.714ns | 49.061ns | 110.040ns | 48.693ns | 1.405ns | 4.14x | 70 (0.7%) |
| `loop parameter` | 0.983ns | 11.690ns | 11.759ns | 11.940ns | 33.400ns | 11.815ns | 0.449ns | 1.00x | 96 (1.0%) |
| `#table+1` | 3.775ns | 22.797ns | 22.974ns | 23.208ns | 72.957ns | 23.027ns | 0.896ns | 1.95x | 38 (0.4%) |
| `table.n` | 13.325ns | 30.588ns | 30.670ns | 30.768ns | 134.604ns | 30.725ns | 1.559ns | 2.61x | 22 (0.2%) |
| `table[0]` | 3.094ns | 36.770ns | 37.050ns | 37.360ns | 140.700ns | 37.088ns | 1.765ns | 3.15x | 22 (0.2%) |
| `lockstep parameter` | 2.871ns | 13.601ns | 13.688ns | 13.898ns | 57.007ns | 13.750ns | 0.603ns | 1.16x | 42 (0.4%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert (global)` | 4.368ns | 6.289ns | 6.356ns | 6.391ns | 9.713ns | 6.352ns | 0.198ns | 1.43x | 64 (0.6%) |
| `table.insert (local)` | 3.537ns | 6.099ns | 6.165ns | 6.201ns | 11.504ns | 6.166ns | 0.254ns | 1.39x | 78 (0.8%) |
| `loop parameter` | 4.003ns | 4.424ns | 4.447ns | 4.505ns | 5.354ns | 4.469ns | 0.090ns | 1.00x | 158 (1.6%) |
| `#table+1` | 4.972ns | 6.289ns | 6.357ns | 6.394ns | 9.832ns | 6.352ns | 0.186ns | 1.43x | 58 (0.6%) |
| `table.n` | 4.981ns | 5.388ns | 5.449ns | 5.484ns | 6.314ns | 5.440ns | 0.095ns | 1.23x | 122 (1.2%) |
| `table[0]` | 6.436ns | 6.857ns | 6.926ns | 6.968ns | 7.782ns | 6.916ns | 0.104ns | 1.56x | 113 (1.1%) |
| `lockstep parameter` | 4.887ns | 5.387ns | 5.448ns | 5.485ns | 6.550ns | 5.440ns | 0.097ns | 1.22x | 120 (1.2%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert (global)` | 19.021ns | 66.481ns | 66.775ns | 67.097ns | 190.842ns | 66.785ns | 1.770ns | 4.70x | 30 (0.3%) |
| `table.insert (local)` | 25.367ns | 63.431ns | 63.703ns | 63.990ns | 149.588ns | 63.724ns | 1.587ns | 4.49x | 24 (0.2%) |
| `loop parameter` | 9.797ns | 14.083ns | 14.202ns | 14.315ns | 30.777ns | 14.208ns | 0.295ns | 1.00x | 33 (0.3%) |
| `#table+1` | 36.197ns | 58.361ns | 58.648ns | 58.937ns | 121.304ns | 58.675ns | 1.331ns | 4.13x | 29 (0.3%) |
| `table.n` | 16.328ns | 23.476ns | 23.582ns | 23.708ns | 120.385ns | 23.617ns | 1.284ns | 1.66x | 17 (0.2%) |
| `table[0]` | 9.310ns | 27.508ns | 28.536ns | 29.013ns | 42.621ns | 28.258ns | 0.837ns | 2.01x | 28 (0.3%) |
| `lockstep parameter` | 5.597ns | 15.659ns | 15.744ns | 15.806ns | 62.438ns | 15.751ns | 0.733ns | 1.11x | 15 (0.1%) |

## table slice

#### One-Time Setup
```lua
local unpack = unpack or table.unpack
local a = {}
for i = 1, 2000 do
	a[i] = i
end
local x, y = 500, 1500
local tnew = table.new
```

| Test | Code |
|------|------|
| `unpack` | `out = {unpack(a, x, y)}` |
| `from scratch` | `out = {}; for i = x, y do out[i - x + 1] = a[i] end` |
| `allocated` | `out = table.new(y - x, 0); for i = x, y do out[i - x + 1] = a[i] end` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 4.742µs | 9.082µs | 9.198µs | 9.286µs | 34.710µs | 9.195µs | 474.531ns | 1.00x | 21 (0.2%) |
| `from scratch` | 36.694µs | 40.794µs | 40.879µs | 40.971µs | 181.911µs | 40.923µs | 1.677µs | 4.44x | 8 (0.1%) |
| `allocated` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 208.382ns | 9.550µs | 9.612µs | 9.672µs | 28.371µs | 9.628µs | 375.986ns | 1.00x | 49 (0.5%) |
| `from scratch` | 24.797µs | 40.089µs | 40.130µs | 40.182µs | 184.522µs | 40.182µs | 1.791µs | 4.17x | 9 (0.1%) |
| `allocated` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 3.349µs | 9.188µs | 9.268µs | 9.357µs | 42.830µs | 9.286µs | 437.223ns | 1.00x | 32 (0.3%) |
| `from scratch` | 10.334µs | 33.629µs | 33.696µs | 33.766µs | 158.558µs | 33.678µs | 1.544µs | 3.64x | 25 (0.3%) |
| `allocated` | - | - | - | - | - | - | - | - | - |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 5.822µs | 7.518µs | 7.638µs | 7.733µs | 24.925µs | 7.640µs | 257.925ns | 1.00x | 113 (1.1%) |
| `from scratch` | 14.383µs | 27.548µs | 27.607µs | 27.668µs | 115.930µs | 27.610µs | 1.066µs | 3.61x | 41 (0.4%) |
| `allocated` | - | - | - | - | - | - | - | - | - |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 2.636µs | 2.797µs | 2.817µs | 2.837µs | 3.164µs | 2.819µs | 34.173ns | 1.09x | 117 (1.2%) |
| `from scratch` | 2.662µs | 2.973µs | 2.990µs | 3.022µs | 3.720µs | 3.000µs | 47.820ns | 1.16x | 157 (1.6%) |
| `allocated` | 2.392µs | 2.534µs | 2.578µs | 2.658µs | 3.082µs | 2.598µs | 80.597ns | 1.00x | 57 (0.6%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 2.576µs | 2.810µs | 5.889µs | 7.389µs | 11.605µs | 5.646µs | 2.741µs | 1.00x | 0 (0.0%) |
| `from scratch` | 2.690µs | 17.079µs | 17.103µs | 17.137µs | 22.545µs | 17.099µs | 271.675ns | 2.90x | 65 (0.7%) |
| `allocated` | 1.586µs | 14.829µs | 14.840µs | 14.852µs | 45.405µs | 14.839µs | 433.525ns | 2.52x | 33 (0.3%) |

## table unpack

#### One-Time Setup
```lua
local a = { 9, 121, 131, 1787 }
local unpack = unpack or table.unpack
local function unpack4(a)
	return a[1], a[2], a[3], a[4]
end
```

| Test | Code |
|------|------|
| `argument expanision` | `local a1, a2, a3, a4 = a[1], a[2], a[3], a[4]` |
| `unpack` | `local a1, a2, a3, a4 = unpack(a)` |
| `function` | `local a1, a2, a3, a4 = unpack4(a)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 23.595ns | 53.166ns | 54.918ns | 56.131ns | 124.469ns | 54.742ns | 2.291ns | 1.00x | 26 (0.3%) |
| `unpack` | 15.109ns | 59.721ns | 60.283ns | 60.768ns | 260.320ns | 60.267ns | 2.955ns | 1.10x | 28 (0.3%) |
| `function` | 12.316ns | 69.004ns | 69.405ns | 69.793ns | 210.173ns | 69.457ns | 3.104ns | 1.26x | 29 (0.3%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 11.689ns | 61.009ns | 61.911ns | 63.191ns | 69.195ns | 62.049ns | 1.707ns | 1.00x | 24 (0.2%) |
| `unpack` | 30.029ns | 70.084ns | 70.533ns | 71.048ns | 420.925ns | 70.652ns | 5.395ns | 1.14x | 26 (0.3%) |
| `function` | 59.496ns | 102.404ns | 102.727ns | 103.032ns | 122.631ns | 102.621ns | 1.687ns | 1.66x | 203 (2.0%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 12.780ns | 29.464ns | 29.474ns | 29.484ns | 52.002ns | 29.453ns | 0.498ns | 1.00x | 77 (0.8%) |
| `unpack` | 1.543ns | 65.140ns | 65.469ns | 65.773ns | 349.959ns | 65.427ns | 4.709ns | 2.22x | 48 (0.5%) |
| `function` | 9.122ns | 51.355ns | 51.381ns | 51.414ns | 177.966ns | 51.371ns | 2.101ns | 1.74x | 39 (0.4%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 11.335ns | 23.984ns | 23.987ns | 23.991ns | 169.622ns | 24.027ns | 1.926ns | 1.00x | 24 (0.2%) |
| `unpack` | 8.333ns | 60.335ns | 61.513ns | 62.657ns | 230.365ns | 61.491ns | 2.538ns | 2.56x | 27 (0.3%) |
| `function` | 3.345ns | 38.571ns | 38.857ns | 39.233ns | 205.423ns | 38.954ns | 2.690ns | 1.62x | 22 (0.2%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 0.279ns | 0.296ns | 0.296ns | 0.296ns | 0.352ns | 0.296ns | 0.002ns | 1.00x | 178 (1.8%) |
| `unpack` | 10.687ns | 30.314ns | 30.365ns | 30.410ns | 77.033ns | 30.366ns | 0.636ns | 102.54x | 44 (0.4%) |
| `function` | 0.229ns | 0.296ns | 0.296ns | 0.296ns | 0.654ns | 0.296ns | 0.004ns | 1.00x | 21 (0.2%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 3.774ns | 13.921ns | 13.934ns | 13.947ns | 21.291ns | 13.930ns | 0.242ns | 1.00x | 44 (0.4%) |
| `unpack` | 1.073ns | 25.535ns | 25.566ns | 25.613ns | 157.798ns | 25.624ns | 1.756ns | 1.83x | 15 (0.1%) |
| `function` | 7.108ns | 21.874ns | 21.880ns | 21.887ns | 94.677ns | 21.884ns | 0.896ns | 1.57x | 30 (0.3%) |

## table.new

| Test | Code |
|------|------|
| `literal` | `out = {1, 2, 3}` |
| `start empty` | `out = {}; out[1] = 1; out[2] = 2; out[3] = 3` |
| `start false` | `out = {false, false, false}; out[1] = 1; out[2] = 2; out[3] = 3` |
| `preallocate` | `out = table.new(3, 0); out[1] = 1; out[2] = 2; out[3] = 3` |
| `ffi fill` | `out = ffi.new("int[3]", 1, 2, 3)` |
| `ffi individual` | `out = ffi.new("int[3]"); out[0] = 1; out[1] = 2; out[2] = 3` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 25.599ns | 72.337ns | 76.346ns | 80.273ns | 168.422ns | 77.058ns | 8.887ns | 1.00x | 139 (1.4%) |
| `start empty` | 228.701ns | 295.152ns | 297.020ns | 299.785ns | 721.438ns | 300.783ns | 19.940ns | 3.89x | 185 (1.8%) |
| `start false` | 49.071ns | 128.400ns | 132.092ns | 137.276ns | 375.650ns | 137.764ns | 22.837ns | 1.73x | 283 (2.8%) |
| `preallocate` | - | - | - | - | - | - | - | - | - |
| `ffi fill` | - | - | - | - | - | - | - | - | - |
| `ffi individual` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 27.746ns | 81.590ns | 83.465ns | 86.913ns | 267.656ns | 84.201ns | 6.022ns | 1.00x | 95 (0.9%) |
| `start empty` | 174.329ns | 275.494ns | 277.582ns | 279.619ns | 658.319ns | 277.856ns | 7.178ns | 3.33x | 90 (0.9%) |
| `start false` | 24.467ns | 133.097ns | 136.805ns | 140.167ns | 466.928ns | 140.455ns | 18.073ns | 1.64x | 290 (2.9%) |
| `preallocate` | - | - | - | - | - | - | - | - | - |
| `ffi fill` | - | - | - | - | - | - | - | - | - |
| `ffi individual` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 18.247ns | 81.888ns | 83.340ns | 86.062ns | 273.260ns | 84.278ns | 5.508ns | 1.00x | 81 (0.8%) |
| `start empty` | 20.244ns | 296.963ns | 299.393ns | 301.604ns | 1.042µs | 299.129ns | 10.289ns | 3.59x | 27 (0.3%) |
| `start false` | 73.560ns | 98.062ns | 102.479ns | 106.171ns | 423.773ns | 102.474ns | 7.327ns | 1.23x | 53 (0.5%) |
| `preallocate` | - | - | - | - | - | - | - | - | - |
| `ffi fill` | - | - | - | - | - | - | - | - | - |
| `ffi individual` | - | - | - | - | - | - | - | - | - |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 49.333ns | 66.698ns | 80.545ns | 95.143ns | 270.363ns | 81.703ns | 15.559ns | 1.04x | 32 (0.3%) |
| `start empty` | 49.967ns | 250.993ns | 252.319ns | 254.400ns | 435.064ns | 252.524ns | 5.455ns | 3.27x | 70 (0.7%) |
| `start false` | 45.987ns | 73.092ns | 77.260ns | 82.740ns | 138.055ns | 77.884ns | 5.835ns | 1.00x | 48 (0.5%) |
| `preallocate` | - | - | - | - | - | - | - | - | - |
| `ffi fill` | - | - | - | - | - | - | - | - | - |
| `ffi individual` | - | - | - | - | - | - | - | - | - |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 0.254ns | 0.296ns | 0.296ns | 0.296ns | 0.353ns | 0.296ns | 0.002ns | 1.00x | 170 (1.7%) |
| `start empty` | 67.877ns | 107.107ns | 107.629ns | 108.051ns | 293.277ns | 107.679ns | 3.232ns | 363.47x | 23 (0.2%) |
| `start false` | 0.240ns | 0.296ns | 0.296ns | 0.296ns | 0.320ns | 0.296ns | 0.001ns | 1.00x | 152 (1.5%) |
| `preallocate` | 0.143ns | 0.296ns | 0.296ns | 0.296ns | 0.571ns | 0.296ns | 0.004ns | 1.00x | 24 (0.2%) |
| `ffi fill` | 0.270ns | 0.296ns | 0.296ns | 0.296ns | 0.341ns | 0.296ns | 0.001ns | 1.00x | 173 (1.7%) |
| `ffi individual` | 0.271ns | 0.296ns | 0.296ns | 0.296ns | 0.750ns | 0.296ns | 0.005ns | 1.00x | 11 (0.1%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 23.501ns | 58.777ns | 99.295ns | 104.953ns | 179.883ns | 75.592ns | 32.589ns | 3.09x | 1 (0.0%) |
| `start empty` | 114.985ns | 141.077ns | 141.232ns | 141.422ns | 451.016ns | 141.306ns | 3.202ns | 4.40x | 13 (0.1%) |
| `start false` | 25.050ns | 31.980ns | 32.109ns | 32.334ns | 139.728ns | 32.254ns | 1.390ns | 1.00x | 16 (0.2%) |
| `preallocate` | 34.462ns | 49.932ns | 50.035ns | 50.176ns | 375.614ns | 50.143ns | 3.606ns | 1.56x | 7 (0.1%) |
| `ffi fill` | 111.195ns | 250.618ns | 250.766ns | 250.916ns | 757.281ns | 251.017ns | 9.678ns | 7.81x | 29 (0.3%) |
| `ffi individual` | 194.958ns | 346.716ns | 346.902ns | 347.128ns | 1.187µs | 347.640ns | 10.316ns | 10.80x | 21 (0.2%) |
