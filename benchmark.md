## character iteration

#### One-Time Setup
```lua
local text = "Hello, this is an example text"
local char, sub, gsub, gmatch = string.char, string.sub, string.gsub, string.gmatch
local cstr = ffi and ffi.cast("const char*", text) or nil
```

| Test | Code |
|------|------|
| `sub` | `for i = 1, #text do out = text:sub(i, i) end` |
| `gmatch` | `for c in gmatch(text, ".") do out = c end` |
| `gsub` | `gsub(text, ".", function(c) out = c end)` |
| `ffi cstr` | `for i = 0, #text - 1 do out = char(cstr[i]) end` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 1.881µs | 6.828µs | 6.839µs | 6.849µs | 47.365µs | 6.848µs | 599.046ns | 1.02x | 6 (0.1%) |
| `gmatch` | 2.806µs | 6.679µs | 6.704µs | 6.741µs | 17.223µs | 6.711µs | 131.796ns | 1.00x | 15 (0.1%) |
| `gsub` | 1.783µs | 8.423µs | 8.435µs | 8.447µs | 46.260µs | 8.441µs | 458.171ns | 1.26x | 11 (0.1%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 5.884µs | 7.613µs | 7.670µs | 7.726µs | 9.534µs | 7.669µs | 95.903ns | 1.12x | 54 (0.5%) |
| `gmatch` | 124.667ns | 6.824µs | 6.836µs | 6.849µs | 31.315µs | 6.845µs | 427.544ns | 1.00x | 15 (0.1%) |
| `gsub` | 2.606µs | 8.687µs | 8.739µs | 8.790µs | 10.192µs | 8.736µs | 114.894ns | 1.28x | 30 (0.3%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 1.467µs | 7.012µs | 7.049µs | 7.079µs | 15.396µs | 7.038µs | 250.570ns | 1.44x | 42 (0.4%) |
| `gmatch` | 160.651ns | 4.866µs | 4.884µs | 4.899µs | 8.075µs | 4.878µs | 138.174ns | 1.00x | 38 (0.4%) |
| `gsub` | 1.201µs | 8.628µs | 8.693µs | 8.755µs | 45.309µs | 8.693µs | 597.640ns | 1.78x | 37 (0.4%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 153.065ns | 6.814µs | 6.890µs | 6.973µs | 20.218µs | 6.890µs | 279.323ns | 1.37x | 47 (0.5%) |
| `gmatch` | 334.311ns | 5.024µs | 5.039µs | 5.054µs | 19.519µs | 5.039µs | 275.428ns | 1.00x | 41 (0.4%) |
| `gsub` | 976.902ns | 5.944µs | 5.967µs | 5.993µs | 30.521µs | 5.964µs | 325.118ns | 1.18x | 44 (0.4%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 220.653ns | 1.159µs | 1.159µs | 1.160µs | 2.208µs | 1.158µs | 32.962ns | 1.00x | 39 (0.4%) |
| `gmatch` | 839.106ns | 5.149µs | 5.151µs | 5.154µs | 18.289µs | 5.149µs | 228.787ns | 4.44x | 45 (0.4%) |
| `gsub` | 1.775µs | 7.758µs | 7.795µs | 7.836µs | 44.428µs | 7.793µs | 425.989ns | 6.72x | 34 (0.3%) |
| `ffi cstr` | 193.421ns | 1.247µs | 1.248µs | 1.312µs | 3.771µs | 1.277µs | 91.393ns | 1.08x | 36 (0.4%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `sub` | 739.190ns | 3.534µs | 3.568µs | 3.612µs | 5.714µs | 3.572µs | 113.523ns | 1.00x | 38 (0.4%) |
| `gmatch` | 1.040µs | 3.801µs | 3.818µs | 3.854µs | 16.434µs | 3.827µs | 257.464ns | 1.07x | 51 (0.5%) |
| `gsub` | 34.825ns | 7.632µs | 7.674µs | 7.714µs | 36.247µs | 7.674µs | 489.812ns | 2.15x | 37 (0.4%) |
| `ffi cstr` | 2.077µs | 5.858µs | 5.869µs | 5.879µs | 29.794µs | 5.873µs | 361.504ns | 1.64x | 26 (0.3%) |

## closure creation

#### One-Time Setup
```lua
local function f1(a, b, fn) return fn(a + b) end
local function f2(a) return a * 2 end
```

| Test | Code |
|------|------|
| `saved fn` | `out = f1(1, 2, f2)` |
| `new closure` | `out = f1(1, 2, function(a) return a * 2 end)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 31.094ns | 175.440ns | 176.642ns | 178.149ns | 642.725ns | 177.030ns | 8.400ns | 1.00x | 17 (0.2%) |
| `new closure` | 181.247ns | 238.649ns | 241.092ns | 243.439ns | 292.264ns | 241.021ns | 3.740ns | 1.36x | 36 (0.4%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 107.627ns | 243.665ns | 244.953ns | 245.955ns | 1.031µs | 244.966ns | 10.408ns | 1.02x | 14 (0.1%) |
| `new closure` | 55.054ns | 240.148ns | 241.148ns | 241.922ns | 924.932ns | 241.047ns | 8.301ns | 1.00x | 17 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 41.889ns | 171.530ns | 171.621ns | 171.707ns | 856.622ns | 171.511ns | 13.212ns | 1.00x | 40 (0.4%) |
| `new closure` | 55.888ns | 179.886ns | 180.049ns | 180.292ns | 951.095ns | 180.248ns | 13.057ns | 1.05x | 33 (0.3%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 2.626ns | 136.842ns | 137.664ns | 138.854ns | 597.189ns | 137.490ns | 7.022ns | 1.00x | 52 (0.5%) |
| `new closure` | 105.723ns | 201.909ns | 206.990ns | 208.431ns | 1.153µs | 205.537ns | 14.467ns | 1.50x | 21 (0.2%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 0.952ns | 1.007ns | 1.007ns | 1.007ns | 2.552ns | 1.007ns | 0.016ns | 1.00x | 7 (0.1%) |
| `new closure` | 63.736ns | 109.989ns | 110.254ns | 110.990ns | 200.884ns | 110.489ns | 1.779ns | 109.50x | 32 (0.3%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `saved fn` | 7.398ns | 72.927ns | 73.098ns | 73.208ns | 898.089ns | 73.200ns | 9.689ns | 1.00x | 21 (0.2%) |
| `new closure` | 95.369ns | 121.551ns | 134.374ns | 235.734ns | 1.019µs | 154.690ns | 49.547ns | 1.84x | 2 (0.0%) |

## cube

#### One-Time Setup
```lua
local x, pow = 10, math.pow
```

| Test | Code |
|------|------|
| `math.pow (global)` | `out = math.pow(x, 2)` |
| `math.pow (local)` | `out = pow(x, 2)` |
| `multiply` | `out = x * x` |
| `exponent` | `out = x ^ 2` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 116.863ns | 243.760ns | 244.365ns | 244.994ns | 310.476ns | 244.372ns | 2.249ns | 6.39x | 33 (0.3%) |
| `math.pow (local)` | 15.249ns | 200.139ns | 200.518ns | 200.925ns | 941.945ns | 200.626ns | 8.194ns | 5.24x | 11 (0.1%) |
| `multiply` | 7.279ns | 38.256ns | 38.259ns | 38.262ns | 185.754ns | 38.271ns | 1.528ns | 1.00x | 8 (0.1%) |
| `exponent` | 53.804ns | 87.638ns | 87.666ns | 87.695ns | 229.783ns | 87.666ns | 2.175ns | 2.29x | 18 (0.2%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 157.526ns | 251.464ns | 251.856ns | 252.263ns | 1.195µs | 252.242ns | 15.749ns | 5.32x | 16 (0.2%) |
| `math.pow (local)` | 92.164ns | 184.502ns | 184.925ns | 185.376ns | 899.285ns | 185.054ns | 8.751ns | 3.91x | 6 (0.1%) |
| `multiply` | 27.922ns | 47.315ns | 47.319ns | 47.324ns | 223.995ns | 47.364ns | 2.547ns | 1.00x | 10 (0.1%) |
| `exponent` | 34.486ns | 95.855ns | 95.880ns | 95.906ns | 233.979ns | 95.770ns | 1.742ns | 2.03x | 14 (0.1%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 63.829ns | 246.318ns | 246.470ns | 246.612ns | 857.317ns | 246.569ns | 10.466ns | 7.02x | 14 (0.1%) |
| `math.pow (local)` | 150.318ns | 202.423ns | 202.879ns | 203.271ns | 1.054µs | 203.075ns | 12.454ns | 5.78x | 9 (0.1%) |
| `multiply` | 17.397ns | 35.118ns | 35.126ns | 35.135ns | 228.751ns | 35.147ns | 1.998ns | 1.00x | 9 (0.1%) |
| `exponent` | 88.150ns | 108.304ns | 108.448ns | 108.711ns | 338.775ns | 108.501ns | 2.857ns | 3.09x | 12 (0.1%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 13.842ns | 213.843ns | 215.214ns | 216.719ns | 1.198µs | 215.261ns | 23.027ns | 7.92x | 79 (0.8%) |
| `math.pow (local)` | 5.989ns | 187.096ns | 188.741ns | 190.667ns | 658.464ns | 188.271ns | 10.891ns | 6.94x | 91 (0.9%) |
| `multiply` | 2.594ns | 35.225ns | 35.241ns | 35.266ns | 162.642ns | 35.195ns | 2.405ns | 1.30x | 84 (0.8%) |
| `exponent` | 5.404ns | 27.174ns | 27.188ns | 27.234ns | 155.619ns | 27.072ns | 2.261ns | 1.00x | 98 (1.0%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 9.062ns | 10.067ns | 10.069ns | 10.071ns | 12.209ns | 10.070ns | 0.033ns | 10.00x | 122 (1.2%) |
| `math.pow (local)` | 0.924ns | 1.007ns | 1.007ns | 1.007ns | 1.182ns | 1.007ns | 0.004ns | 1.00x | 131 (1.3%) |
| `multiply` | 0.387ns | 1.007ns | 1.007ns | 1.007ns | 1.901ns | 1.007ns | 0.016ns | 1.00x | 25 (0.3%) |
| `exponent` | 0.535ns | 1.007ns | 1.007ns | 1.007ns | 2.438ns | 1.007ns | 0.016ns | 1.00x | 12 (0.1%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 27.610ns | 109.336ns | 109.369ns | 109.402ns | 557.429ns | 109.279ns | 5.277ns | 5.53x | 30 (0.3%) |
| `math.pow (local)` | 36.923ns | 97.417ns | 97.538ns | 97.653ns | 586.881ns | 97.550ns | 7.018ns | 4.93x | 33 (0.3%) |
| `multiply` | 2.638ns | 19.759ns | 19.781ns | 19.797ns | 87.346ns | 19.759ns | 0.946ns | 1.00x | 37 (0.4%) |
| `exponent` | 4.706ns | 77.965ns | 77.988ns | 78.011ns | 332.734ns | 77.901ns | 3.932ns | 3.94x | 30 (0.3%) |

## default

#### One-Time Setup
```lua
local x = false
```

| Test | Code |
|------|------|
| `if-else` | `if not x then out = 1 else out = x end` |
| `or` | `out = x or 1` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 7.284ns | 38.679ns | 38.686ns | 38.692ns | 47.725ns | 38.678ns | 0.422ns | 1.14x | 53 (0.5%) |
| `or` | 23.821ns | 33.226ns | 33.951ns | 34.406ns | 143.794ns | 33.891ns | 1.702ns | 1.00x | 13 (0.1%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 23.022ns | 52.343ns | 52.353ns | 52.360ns | 306.089ns | 52.390ns | 3.178ns | 1.21x | 11 (0.1%) |
| `or` | 31.690ns | 43.280ns | 43.313ns | 44.792ns | 49.558ns | 43.765ns | 1.270ns | 1.00x | 20 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 30.350ns | 41.129ns | 41.142ns | 41.158ns | 217.745ns | 41.176ns | 1.974ns | 1.23x | 8 (0.1%) |
| `or` | 27.457ns | 33.310ns | 33.322ns | 33.338ns | 273.673ns | 33.374ns | 3.483ns | 1.00x | 3 (0.0%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 4.275ns | 29.578ns | 29.598ns | 29.613ns | 252.650ns | 29.567ns | 3.095ns | 1.01x | 49 (0.5%) |
| `or` | 5.294ns | 29.194ns | 29.199ns | 29.206ns | 239.495ns | 29.161ns | 2.298ns | 1.00x | 25 (0.3%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 0.862ns | 1.007ns | 1.007ns | 1.007ns | 1.199ns | 1.007ns | 0.007ns | 1.00x | 122 (1.2%) |
| `or` | 0.936ns | 1.007ns | 1.007ns | 1.007ns | 1.166ns | 1.007ns | 0.004ns | 1.00x | 138 (1.4%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `if-else` | 3.852ns | 25.154ns | 25.322ns | 25.572ns | 55.844ns | 25.329ns | 0.756ns | 1.51x | 35 (0.4%) |
| `or` | 0.166ns | 16.654ns | 16.751ns | 16.787ns | 191.889ns | 16.777ns | 2.233ns | 1.00x | 27 (0.3%) |

## empty string

#### One-Time Setup
```lua
local str = ""
local cstr = ffi and ffi.cast("const char*", str) or nil
```

| Test | Code |
|------|------|
| `length` | `out = #str == 0` |
| `value` | `out = str == ""` |
| `ffi cstr` | `out = cstr[0] == 0` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 21.539ns | 55.610ns | 57.849ns | 60.012ns | 71.972ns | 57.799ns | 3.109ns | 1.30x | 8 (0.1%) |
| `value` | 4.357ns | 42.998ns | 44.441ns | 46.362ns | 353.886ns | 44.617ns | 5.267ns | 1.00x | 10 (0.1%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 43.585ns | 74.002ns | 74.074ns | 74.141ns | 485.318ns | 74.185ns | 5.846ns | 1.18x | 6 (0.1%) |
| `value` | 17.430ns | 62.524ns | 62.571ns | 62.639ns | 383.552ns | 62.664ns | 4.521ns | 1.00x | 11 (0.1%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 15.686ns | 72.745ns | 72.879ns | 73.036ns | 425.699ns | 72.784ns | 4.012ns | 1.23x | 28 (0.3%) |
| `value` | 4.537ns | 59.064ns | 59.156ns | 59.210ns | 253.518ns | 58.974ns | 3.598ns | 1.00x | 60 (0.6%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 9.156ns | 47.244ns | 47.389ns | 47.551ns | 329.104ns | 47.341ns | 4.174ns | 1.28x | 35 (0.4%) |
| `value` | 5.780ns | 36.974ns | 37.033ns | 37.143ns | 73.489ns | 36.968ns | 1.528ns | 1.00x | 63 (0.6%) |
| `ffi cstr` | - | - | - | - | - | - | - | - | - |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 0.115ns | 1.007ns | 1.007ns | 1.007ns | 1.606ns | 1.007ns | 0.012ns | 1.00x | 20 (0.2%) |
| `value` | 0.863ns | 1.007ns | 1.007ns | 1.007ns | 1.212ns | 1.007ns | 0.007ns | 1.00x | 111 (1.1%) |
| `ffi cstr` | 0.250ns | 1.007ns | 1.007ns | 1.007ns | 1.720ns | 1.007ns | 0.011ns | 1.00x | 23 (0.2%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `length` | 3.861ns | 30.992ns | 31.014ns | 31.041ns | 222.458ns | 31.042ns | 2.983ns | 1.28x | 27 (0.3%) |
| `value` | 4.840ns | 24.231ns | 24.237ns | 24.243ns | 72.853ns | 24.229ns | 0.889ns | 1.00x | 37 (0.4%) |
| `ffi cstr` | 7.790ns | 145.195ns | 145.815ns | 146.455ns | 809.218ns | 145.967ns | 9.699ns | 6.02x | 29 (0.3%) |

## fmod

#### One-Time Setup
```lua
local fmod1 = math.fmod
local function fmod2(a, b)
	if (a < 0) == (b < 0) then
		return a % b
	end
	return (a % b) - b
end
local function fmod3(a, b)
	return (a % b) - (((a < 0) == (b < 0)) and 0 or b)
end
local function fmod4(a, b)
	return a - math.floor(a / b) * b
end
local fmod5
if _VERSION:match("%d.%d") >= "5.3" then
	fmod5 = load("return function(a, b) return a - a // b * b end")()
end
```

| Test | Code |
|------|------|
| `fmod (global)` | `out = math.fmod(__i, 10)` |
| `fmod (local)` | `out = fmod1(__i, 10)` |
| `branchy` | `out = fmod2(__i, 10)` |
| `branchless` | `out = fmod3(__i, 10)` |
| `definition (math.floor)` | `out = fmod4(__i, 10)` |
| `definition (floor division)` | `out = fmod5(__i, 10)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 94.369ns | 183.965ns | 184.377ns | 184.944ns | 833.995ns | 184.708ns | 10.646ns | 1.29x | 13 (0.1%) |
| `fmod (local)` | 73.945ns | 142.453ns | 142.692ns | 142.933ns | 372.441ns | 142.711ns | 2.662ns | 1.00x | 29 (0.3%) |
| `branchy` | 40.377ns | 176.720ns | 177.809ns | 179.247ns | 707.219ns | 178.157ns | 8.026ns | 1.25x | 22 (0.2%) |
| `branchless` | 170.023ns | 212.169ns | 213.746ns | 215.531ns | 263.358ns | 213.888ns | 3.188ns | 1.50x | 93 (0.9%) |
| `definition (math.floor)` | 75.276ns | 256.422ns | 258.646ns | 261.940ns | 1.511µs | 259.637ns | 17.937ns | 1.81x | 16 (0.2%) |
| `definition (floor division)` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 85.546ns | 205.262ns | 205.642ns | 205.989ns | 858.034ns | 205.826ns | 10.014ns | 1.45x | 19 (0.2%) |
| `fmod (local)` | 111.404ns | 141.167ns | 141.864ns | 142.524ns | 168.929ns | 141.841ns | 1.307ns | 1.00x | 99 (1.0%) |
| `branchy` | 55.394ns | 231.593ns | 233.726ns | 235.069ns | 1.303µs | 233.515ns | 19.201ns | 1.65x | 14 (0.1%) |
| `branchless` | 212.292ns | 267.652ns | 270.770ns | 274.694ns | 313.678ns | 271.165ns | 5.604ns | 1.91x | 53 (0.5%) |
| `definition (math.floor)` | 170.809ns | 305.286ns | 306.840ns | 308.021ns | 1.045µs | 306.871ns | 12.276ns | 2.16x | 8 (0.1%) |
| `definition (floor division)` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 49.320ns | 202.975ns | 203.064ns | 203.151ns | 562.755ns | 202.711ns | 6.847ns | 1.41x | 45 (0.4%) |
| `fmod (local)` | 27.718ns | 143.906ns | 144.091ns | 144.231ns | 901.258ns | 144.023ns | 11.183ns | 1.00x | 24 (0.2%) |
| `branchy` | 26.932ns | 211.313ns | 211.546ns | 211.813ns | 363.782ns | 211.180ns | 6.819ns | 1.47x | 49 (0.5%) |
| `branchless` | 35.466ns | 243.824ns | 244.096ns | 244.395ns | 1.348µs | 243.935ns | 15.239ns | 1.69x | 47 (0.5%) |
| `definition (math.floor)` | 11.302ns | 277.881ns | 279.224ns | 280.481ns | 928.395ns | 278.850ns | 10.843ns | 1.94x | 39 (0.4%) |
| `definition (floor division)` | 39.582ns | 156.046ns | 156.120ns | 156.412ns | 500.622ns | 156.019ns | 7.159ns | 1.08x | 49 (0.5%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 18.768ns | 146.623ns | 149.872ns | 152.914ns | 784.686ns | 149.571ns | 11.684ns | 1.14x | 54 (0.5%) |
| `fmod (local)` | 15.507ns | 129.874ns | 131.830ns | 133.593ns | 416.557ns | 131.617ns | 7.301ns | 1.00x | 47 (0.5%) |
| `branchy` | 33.071ns | 150.564ns | 150.722ns | 150.864ns | 952.267ns | 150.637ns | 11.997ns | 1.14x | 37 (0.4%) |
| `branchless` | 6.175ns | 178.502ns | 178.693ns | 179.493ns | 681.335ns | 178.568ns | 9.060ns | 1.36x | 55 (0.5%) |
| `definition (math.floor)` | 46.568ns | 200.064ns | 200.765ns | 201.319ns | 1.415µs | 200.702ns | 17.005ns | 1.52x | 32 (0.3%) |
| `definition (floor division)` | 25.902ns | 131.780ns | 132.585ns | 132.815ns | 465.004ns | 131.903ns | 7.331ns | 1.01x | 62 (0.6%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 4.059ns | 105.911ns | 106.959ns | 107.923ns | 268.441ns | 106.815ns | 3.658ns | 23.96x | 41 (0.4%) |
| `fmod (local)` | 19.935ns | 101.536ns | 103.391ns | 105.057ns | 344.429ns | 103.294ns | 4.886ns | 23.16x | 43 (0.4%) |
| `branchy` | 9.453ns | 12.080ns | 12.082ns | 12.084ns | 15.132ns | 12.078ns | 0.125ns | 2.71x | 60 (0.6%) |
| `branchless` | 9.116ns | 12.080ns | 12.082ns | 12.084ns | 23.601ns | 12.079ns | 0.195ns | 2.71x | 69 (0.7%) |
| `definition (math.floor)` | 4.371ns | 4.463ns | 4.464ns | 4.466ns | 4.616ns | 4.466ns | 0.010ns | 1.00x | 248 (2.5%) |
| `definition (floor division)` | - | - | - | - | - | - | - | - | - |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `fmod (global)` | 24.185ns | 98.311ns | 98.487ns | 98.671ns | 322.905ns | 98.457ns | 3.219ns | 1.16x | 28 (0.3%) |
| `fmod (local)` | 26.684ns | 84.778ns | 84.996ns | 85.247ns | 466.490ns | 85.075ns | 5.252ns | 1.00x | 25 (0.3%) |
| `branchy` | 5.713ns | 96.311ns | 96.381ns | 96.450ns | 443.638ns | 96.341ns | 4.622ns | 1.13x | 29 (0.3%) |
| `branchless` | 12.753ns | 118.135ns | 118.345ns | 118.547ns | 619.437ns | 118.246ns | 5.981ns | 1.39x | 31 (0.3%) |
| `definition (math.floor)` | 19.641ns | 99.826ns | 99.904ns | 100.003ns | 454.686ns | 99.918ns | 5.013ns | 1.18x | 26 (0.3%) |
| `definition (floor division)` | - | - | - | - | - | - | - | - | - |

## ipairs iteration

#### One-Time Setup
```lua
local nxt = next
local len = 100
local a = { n = len, [0] = len }
for i = 1, len do
	a[i] = i
end
```

| Test | Code |
|------|------|
| `ipairs` | `for k, v in ipairs(a) do out = v end` |
| `pairs` | `for k, v in pairs(a) do out = v end` |
| `next (global)` | `for k, v in next, a do out = v end` |
| `next (local)` | `for k, v in nxt, a do out = v end` |
| `local len` | `for i = 1, len do out = a[i] end` |
| `table.n` | `for i = 1, a.n do out = a[i] end` |
| `table[0]` | `for i = 1, a[0] do out = a[i] end` |
| `#table` | `for i = 1, #a do out = a[i] end` |
| `constant` | `for i = 1, 100 do out = a[i] end` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs` | 8.399µs | 12.620µs | 12.679µs | 12.735µs | 90.556µs | 12.695µs | 974.959ns | 2.64x | 9 (0.1%) |
| `pairs` | 5.229µs | 12.098µs | 12.106µs | 12.114µs | 22.531µs | 12.107µs | 174.401ns | 2.52x | 26 (0.3%) |
| `next (global)` | 2.664µs | 12.028µs | 12.036µs | 12.044µs | 66.144µs | 12.058µs | 930.757ns | 2.51x | 24 (0.2%) |
| `next (local)` | 9.610µs | 11.995µs | 12.002µs | 12.010µs | 35.404µs | 12.007µs | 319.435ns | 2.50x | 11 (0.1%) |
| `local len` | 2.365µs | 4.724µs | 4.795µs | 4.871µs | 23.798µs | 4.807µs | 404.019ns | 1.00x | 20 (0.2%) |
| `table.n` | 423.969ns | 4.750µs | 4.843µs | 4.854µs | 8.621µs | 4.810µs | 94.563ns | 1.01x | 15 (0.1%) |
| `table[0]` | 533.166ns | 4.758µs | 4.855µs | 4.942µs | 24.129µs | 4.852µs | 330.890ns | 1.01x | 15 (0.1%) |
| `#table` | 1.568µs | 4.759µs | 4.809µs | 4.868µs | 5.636µs | 4.808µs | 102.251ns | 1.00x | 29 (0.3%) |
| `constant` | 1.351µs | 4.725µs | 4.803µs | 4.873µs | 25.877µs | 4.808µs | 407.122ns | 1.00x | 12 (0.1%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs` | 76.882ns | 13.401µs | 13.445µs | 13.483µs | 74.349µs | 13.457µs | 888.938ns | 2.58x | 7 (0.1%) |
| `pairs` | 1.029µs | 12.008µs | 12.024µs | 12.043µs | 48.349µs | 12.029µs | 431.313ns | 2.31x | 16 (0.2%) |
| `next (global)` | 3.101µs | 11.908µs | 11.928µs | 11.946µs | 53.795µs | 11.947µs | 756.601ns | 2.29x | 11 (0.1%) |
| `next (local)` | 3.433µs | 11.986µs | 12.002µs | 12.016µs | 56.337µs | 12.012µs | 519.168ns | 2.30x | 7 (0.1%) |
| `local len` | 4.083µs | 5.180µs | 5.296µs | 5.404µs | 12.810µs | 5.292µs | 192.326ns | 1.02x | 7 (0.1%) |
| `table.n` | 1.886µs | 5.205µs | 5.211µs | 5.213µs | 22.097µs | 5.212µs | 250.649ns | 1.00x | 11 (0.1%) |
| `table[0]` | 4.258µs | 5.228µs | 5.230µs | 5.233µs | 15.721µs | 5.234µs | 143.216ns | 1.00x | 22 (0.2%) |
| `#table` | 2.727µs | 5.267µs | 5.389µs | 5.481µs | 20.267µs | 5.387µs | 294.102ns | 1.03x | 17 (0.2%) |
| `constant` | 3.604µs | 5.195µs | 5.305µs | 5.404µs | 6.818µs | 5.300µs | 149.423ns | 1.02x | 15 (0.1%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs` | 7.123µs | 10.330µs | 10.333µs | 10.336µs | 41.324µs | 10.341µs | 383.349ns | 2.91x | 14 (0.1%) |
| `pairs` | 7.789µs | 10.549µs | 10.564µs | 10.580µs | 30.517µs | 10.574µs | 266.534ns | 2.97x | 21 (0.2%) |
| `next (global)` | 5.025µs | 10.450µs | 10.469µs | 10.489µs | 57.038µs | 10.488µs | 736.385ns | 2.94x | 11 (0.1%) |
| `next (local)` | 1.613µs | 10.442µs | 10.461µs | 10.480µs | 42.947µs | 10.463µs | 349.053ns | 2.94x | 13 (0.1%) |
| `local len` | 1.925µs | 3.555µs | 3.556µs | 3.557µs | 11.916µs | 3.558µs | 138.792ns | 1.00x | 16 (0.2%) |
| `table.n` | 2.456µs | 3.570µs | 3.571µs | 3.571µs | 7.149µs | 3.573µs | 54.816ns | 1.00x | 34 (0.3%) |
| `table[0]` | 2.197µs | 3.573µs | 3.574µs | 3.574µs | 17.087µs | 3.579µs | 220.070ns | 1.01x | 10 (0.1%) |
| `#table` | 874.723ns | 3.601µs | 3.603µs | 3.606µs | 16.451µs | 3.605µs | 146.885ns | 1.01x | 14 (0.1%) |
| `constant` | 457.950ns | 3.554µs | 3.555µs | 3.555µs | 18.556µs | 3.561µs | 240.149ns | 1.00x | 12 (0.1%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs` | 1.610µs | 9.578µs | 9.596µs | 9.612µs | 43.293µs | 9.567µs | 519.581ns | 2.97x | 54 (0.5%) |
| `pairs` | 2.611µs | 10.553µs | 10.632µs | 10.754µs | 58.836µs | 10.643µs | 732.485ns | 3.29x | 46 (0.5%) |
| `next (global)` | 1.795µs | 10.486µs | 10.612µs | 10.743µs | 51.108µs | 10.609µs | 708.610ns | 3.29x | 44 (0.4%) |
| `next (local)` | 1.806µs | 10.494µs | 10.615µs | 10.740µs | 42.557µs | 10.604µs | 698.030ns | 3.29x | 48 (0.5%) |
| `local len` | 262.818ns | 3.231µs | 3.232µs | 3.234µs | 14.048µs | 3.227µs | 155.256ns | 1.00x | 46 (0.5%) |
| `table.n` | 215.900ns | 3.242µs | 3.244µs | 3.245µs | 12.688µs | 3.239µs | 171.615ns | 1.00x | 44 (0.4%) |
| `table[0]` | 820.898ns | 3.262µs | 3.264µs | 3.265µs | 14.803µs | 3.259µs | 157.492ns | 1.01x | 50 (0.5%) |
| `#table` | 501.461ns | 3.255µs | 3.257µs | 3.259µs | 21.113µs | 3.253µs | 264.987ns | 1.01x | 40 (0.4%) |
| `constant` | 873.364ns | 3.229µs | 3.229µs | 3.230µs | 4.893µs | 3.225µs | 93.561ns | 1.00x | 49 (0.5%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs` | 411.727ns | 460.047ns | 460.130ns | 460.215ns | 482.940ns | 460.167ns | 1.119ns | 1.93x | 217 (2.2%) |
| `pairs` | 162.883ns | 1.148µs | 1.148µs | 1.149µs | 2.738µs | 1.148µs | 38.047ns | 4.80x | 38 (0.4%) |
| `next (global)` | 676.271ns | 1.238µs | 1.240µs | 1.241µs | 2.405µs | 1.239µs | 27.409ns | 5.19x | 43 (0.4%) |
| `next (local)` | 1.810µs | 3.097µs | 3.104µs | 3.111µs | 6.676µs | 3.104µs | 71.404ns | 12.99x | 40 (0.4%) |
| `local len` | 164.696ns | 260.159ns | 261.274ns | 261.842ns | 285.107ns | 261.067ns | 1.443ns | 1.09x | 25 (0.3%) |
| `table.n` | 116.024ns | 251.122ns | 251.301ns | 251.484ns | 297.776ns | 251.313ns | 1.634ns | 1.05x | 38 (0.4%) |
| `table[0]` | 235.272ns | 251.825ns | 252.150ns | 252.450ns | 270.930ns | 252.146ns | 0.819ns | 1.06x | 155 (1.6%) |
| `#table` | 262.285ns | 277.554ns | 277.825ns | 278.203ns | 294.496ns | 277.908ns | 0.875ns | 1.16x | 172 (1.7%) |
| `constant` | 230.325ns | 238.594ns | 238.951ns | 239.236ns | 249.725ns | 238.907ns | 0.776ns | 1.00x | 154 (1.5%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `ipairs` | 1.701µs | 3.965µs | 3.972µs | 3.979µs | 14.752µs | 3.975µs | 181.034ns | 2.78x | 25 (0.3%) |
| `pairs` | 128.457ns | 1.446µs | 1.450µs | 1.454µs | 2.280µs | 1.449µs | 38.042ns | 1.01x | 33 (0.3%) |
| `next (global)` | 66.679ns | 1.426µs | 1.430µs | 1.435µs | 13.177µs | 1.432µs | 160.721ns | 1.00x | 29 (0.3%) |
| `next (local)` | 1.444µs | 4.677µs | 4.680µs | 4.682µs | 6.950µs | 4.676µs | 115.278ns | 3.27x | 53 (0.5%) |
| `local len` | 107.489ns | 2.054µs | 2.057µs | 2.060µs | 13.445µs | 2.057µs | 192.471ns | 1.44x | 35 (0.4%) |
| `table.n` | 155.121ns | 2.060µs | 2.068µs | 2.078µs | 15.537µs | 2.068µs | 149.039ns | 1.45x | 22 (0.2%) |
| `table[0]` | 189.609ns | 2.061µs | 2.065µs | 2.069µs | 15.374µs | 2.065µs | 190.178ns | 1.44x | 32 (0.3%) |
| `#table` | 280.235ns | 2.077µs | 2.087µs | 2.094µs | 3.699µs | 2.083µs | 62.304ns | 1.46x | 32 (0.3%) |
| `constant` | 457.903ns | 2.054µs | 2.059µs | 2.063µs | 12.798µs | 2.059µs | 175.134ns | 1.44x | 25 (0.3%) |

## local vs global index

#### One-Time Setup
```lua
local s = math.sin
```

| Test | Code |
|------|------|
| `local` | `out = s(3.14)` |
| `global` | `out = math.sin(3.14)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 21.834ns | 122.393ns | 122.490ns | 122.589ns | 566.237ns | 122.531ns | 4.694ns | 1.00x | 6 (0.1%) |
| `global` | 19.066ns | 166.586ns | 167.537ns | 168.394ns | 823.420ns | 167.805ns | 10.696ns | 1.37x | 15 (0.1%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 20.634ns | 128.958ns | 129.560ns | 130.155ns | 769.138ns | 129.820ns | 10.686ns | 1.00x | 11 (0.1%) |
| `global` | 171.501ns | 193.595ns | 194.200ns | 194.700ns | 420.663ns | 194.181ns | 2.864ns | 1.50x | 16 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 91.797ns | 125.594ns | 126.938ns | 127.298ns | 275.693ns | 126.508ns | 2.867ns | 1.00x | 10 (0.1%) |
| `global` | 134.386ns | 173.618ns | 174.835ns | 175.897ns | 547.132ns | 174.704ns | 4.244ns | 1.38x | 11 (0.1%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 0.364ns | 111.071ns | 111.949ns | 113.200ns | 717.560ns | 112.103ns | 13.446ns | 1.00x | 73 (0.7%) |
| `global` | 5.690ns | 137.396ns | 137.790ns | 138.178ns | 821.531ns | 137.654ns | 17.175ns | 1.23x | 79 (0.8%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 0.953ns | 1.007ns | 1.007ns | 1.007ns | 1.299ns | 1.007ns | 0.006ns | 1.00x | 116 (1.2%) |
| `global` | 0.940ns | 1.007ns | 1.007ns | 1.007ns | 1.073ns | 1.007ns | 0.003ns | 1.00x | 174 (1.7%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 10.949ns | 54.169ns | 54.220ns | 54.271ns | 146.494ns | 54.176ns | 1.970ns | 1.00x | 36 (0.4%) |
| `global` | 16.669ns | 67.394ns | 67.430ns | 67.519ns | 358.413ns | 67.490ns | 5.344ns | 1.24x | 33 (0.3%) |

## local vs global vs upvalue

#### One-Time Setup
```lua
local t_upvalue = type
```

#### Per Iteration Setup
```lua
local t_local = type
```

| Test | Code |
|------|------|
| `local` | `out = t_local(3)` |
| `upvalue` | `out = t_upvalue(3)` |
| `global` | `out = type(3)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 119.761ns | 155.140ns | 155.732ns | 156.266ns | 798.950ns | 155.835ns | 6.756ns | 1.00x | 6 (0.1%) |
| `upvalue` | 56.678ns | 155.302ns | 155.981ns | 156.639ns | 800.755ns | 156.201ns | 8.152ns | 1.00x | 7 (0.1%) |
| `global` | 1.596ns | 174.876ns | 175.821ns | 176.728ns | 415.504ns | 175.837ns | 4.742ns | 1.13x | 13 (0.1%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 9.949ns | 165.748ns | 165.996ns | 166.174ns | 1.067µs | 166.169ns | 11.986ns | 1.00x | 14 (0.1%) |
| `upvalue` | 129.142ns | 167.035ns | 167.230ns | 167.410ns | 446.894ns | 167.234ns | 2.941ns | 1.01x | 12 (0.1%) |
| `global` | 41.691ns | 195.131ns | 195.633ns | 196.133ns | 674.219ns | 195.736ns | 6.951ns | 1.18x | 18 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 4.646ns | 120.436ns | 120.637ns | 120.814ns | 699.286ns | 119.985ns | 10.048ns | 1.00x | 95 (0.9%) |
| `upvalue` | 11.780ns | 120.261ns | 120.317ns | 120.377ns | 706.588ns | 120.296ns | 11.578ns | 1.00x | 46 (0.5%) |
| `global` | 39.090ns | 136.941ns | 137.027ns | 137.507ns | 747.538ns | 137.005ns | 7.807ns | 1.14x | 35 (0.4%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 17.128ns | 106.250ns | 106.326ns | 106.399ns | 416.300ns | 106.262ns | 5.943ns | 1.02x | 43 (0.4%) |
| `upvalue` | 11.773ns | 103.945ns | 104.109ns | 104.269ns | 749.365ns | 104.116ns | 9.606ns | 1.00x | 37 (0.4%) |
| `global` | 18.986ns | 112.974ns | 113.284ns | 113.520ns | 631.046ns | 113.145ns | 8.983ns | 1.09x | 42 (0.4%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 0.863ns | 1.007ns | 1.007ns | 1.007ns | 1.303ns | 1.007ns | 0.007ns | 1.00x | 102 (1.0%) |
| `upvalue` | 0.855ns | 1.007ns | 1.007ns | 1.007ns | 1.196ns | 1.007ns | 0.005ns | 1.00x | 125 (1.3%) |
| `global` | 0.851ns | 1.007ns | 1.007ns | 1.007ns | 2.571ns | 1.007ns | 0.016ns | 1.00x | 10 (0.1%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `local` | 6.980ns | 38.756ns | 38.838ns | 38.897ns | 257.142ns | 38.852ns | 2.996ns | 1.02x | 23 (0.2%) |
| `upvalue` | 12.206ns | 38.086ns | 38.099ns | 38.113ns | 293.437ns | 38.126ns | 2.727ns | 1.00x | 21 (0.2%) |
| `global` | 5.887ns | 39.588ns | 39.605ns | 39.622ns | 358.450ns | 39.647ns | 4.469ns | 1.04x | 17 (0.2%) |

## localized method

#### One-Time Setup
```lua
local class = {
	test = function(self) return 1 end,
}
local ltest = class.test
```

| Test | Code |
|------|------|
| `none` | `out = class:test(); out = class:test(); out = class:test()` |
| `inside loop` | `local test = class.test; out = test(class); out = test(class); out = test(class)` |
| `outside loop` | `out = ltest(class); out = ltest(class); out = ltest(class)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 264.432ns | 362.015ns | 362.748ns | 363.689ns | 628.345ns | 362.873ns | 3.530ns | 1.20x | 34 (0.3%) |
| `inside loop` | 65.607ns | 331.275ns | 332.146ns | 333.034ns | 1.562µs | 332.567ns | 20.334ns | 1.10x | 14 (0.1%) |
| `outside loop` | 222.918ns | 302.009ns | 302.476ns | 302.863ns | 880.375ns | 302.457ns | 6.827ns | 1.00x | 19 (0.2%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 195.062ns | 440.611ns | 448.635ns | 457.963ns | 1.092µs | 449.032ns | 14.914ns | 1.12x | 28 (0.3%) |
| `inside loop` | 54.830ns | 396.511ns | 408.789ns | 416.285ns | 1.799µs | 407.808ns | 30.860ns | 1.02x | 10 (0.1%) |
| `outside loop` | 126.013ns | 396.394ns | 398.829ns | 400.424ns | 997.992ns | 398.908ns | 10.970ns | 1.00x | 21 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 99.751ns | 383.103ns | 387.373ns | 390.983ns | 1.263µs | 386.557ns | 15.089ns | 1.17x | 31 (0.3%) |
| `inside loop` | 7.930ns | 353.953ns | 357.619ns | 360.512ns | 1.531µs | 356.920ns | 19.745ns | 1.08x | 33 (0.3%) |
| `outside loop` | 5.365ns | 328.836ns | 331.391ns | 333.316ns | 1.420µs | 330.300ns | 16.838ns | 1.00x | 46 (0.5%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 0.218ns | 341.961ns | 342.498ns | 343.078ns | 1.331µs | 342.238ns | 19.511ns | 1.19x | 47 (0.5%) |
| `inside loop` | 23.241ns | 293.646ns | 294.685ns | 295.461ns | 1.445µs | 294.434ns | 14.942ns | 1.02x | 40 (0.4%) |
| `outside loop` | 15.297ns | 287.928ns | 288.701ns | 289.415ns | 1.179µs | 288.577ns | 15.922ns | 1.00x | 42 (0.4%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 0.812ns | 1.007ns | 1.007ns | 1.007ns | 1.111ns | 1.007ns | 0.004ns | 1.00x | 123 (1.2%) |
| `inside loop` | 0.884ns | 1.007ns | 1.007ns | 1.007ns | 1.201ns | 1.007ns | 0.004ns | 1.00x | 114 (1.1%) |
| `outside loop` | 0.965ns | 1.007ns | 1.007ns | 1.007ns | 1.075ns | 1.007ns | 0.003ns | 1.00x | 199 (2.0%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `none` | 25.019ns | 141.537ns | 141.636ns | 141.739ns | 856.750ns | 141.659ns | 10.967ns | 1.20x | 30 (0.3%) |
| `inside loop` | 6.241ns | 120.312ns | 120.461ns | 120.595ns | 1.380µs | 120.434ns | 13.141ns | 1.02x | 25 (0.3%) |
| `outside loop` | 21.035ns | 118.276ns | 118.445ns | 118.617ns | 838.684ns | 118.463ns | 9.880ns | 1.00x | 30 (0.3%) |

## math.max

#### One-Time Setup
```lua
local max, x, y = math.max, 1, 100
```

| Test | Code |
|------|------|
| `math.max (global)` | `out = math.max(x, y)` |
| `math.max (local)` | `out = max(x, y)` |
| `if-else` | `if x > y then out = x else out = y end` |
| `branchless` | `out = x > y and x or y` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 94.350ns | 166.092ns | 166.334ns | 166.800ns | 930.048ns | 166.660ns | 9.529ns | 3.09x | 11 (0.1%) |
| `math.max (local)` | 41.333ns | 118.898ns | 119.445ns | 119.999ns | 226.795ns | 119.475ns | 1.892ns | 2.22x | 30 (0.3%) |
| `if-else` | 40.570ns | 53.794ns | 53.865ns | 54.294ns | 339.543ns | 53.872ns | 4.238ns | 1.00x | 7 (0.1%) |
| `branchless` | 7.624ns | 53.570ns | 53.864ns | 54.248ns | 232.775ns | 53.768ns | 2.282ns | 1.00x | 13 (0.1%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 15.259ns | 197.053ns | 197.347ns | 197.622ns | 732.639ns | 197.468ns | 6.908ns | 2.73x | 15 (0.1%) |
| `math.max (local)` | 93.400ns | 130.618ns | 130.722ns | 130.838ns | 692.767ns | 130.769ns | 5.724ns | 1.81x | 10 (0.1%) |
| `if-else` | 48.597ns | 69.491ns | 72.559ns | 76.431ns | 416.357ns | 73.112ns | 7.066ns | 1.00x | 8 (0.1%) |
| `branchless` | 12.845ns | 69.448ns | 72.419ns | 76.379ns | 165.417ns | 73.066ns | 5.542ns | 1.00x | 49 (0.5%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 50.414ns | 156.652ns | 156.712ns | 156.791ns | 762.546ns | 156.822ns | 8.430ns | 2.59x | 10 (0.1%) |
| `math.max (local)` | 37.067ns | 111.258ns | 111.293ns | 111.336ns | 358.692ns | 111.335ns | 2.728ns | 1.84x | 12 (0.1%) |
| `if-else` | 53.238ns | 60.413ns | 60.439ns | 60.474ns | 371.016ns | 60.553ns | 3.713ns | 1.00x | 5 (0.1%) |
| `branchless` | 53.123ns | 60.410ns | 60.437ns | 60.470ns | 273.926ns | 60.513ns | 2.811ns | 1.00x | 7 (0.1%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 23.541ns | 126.493ns | 127.413ns | 128.806ns | 636.283ns | 127.505ns | 8.110ns | 3.01x | 46 (0.5%) |
| `math.max (local)` | 21.965ns | 105.474ns | 107.947ns | 110.153ns | 468.986ns | 107.871ns | 7.348ns | 2.55x | 61 (0.6%) |
| `if-else` | 2.363ns | 42.281ns | 42.290ns | 42.300ns | 178.071ns | 42.275ns | 1.691ns | 1.00x | 34 (0.3%) |
| `branchless` | 2.097ns | 42.282ns | 42.291ns | 42.303ns | 258.927ns | 42.318ns | 3.798ns | 1.00x | 47 (0.5%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 9.708ns | 10.067ns | 10.069ns | 10.071ns | 11.988ns | 10.071ns | 0.038ns | 10.00x | 61 (0.6%) |
| `math.max (local)` | 0.849ns | 1.007ns | 1.007ns | 1.007ns | 2.571ns | 1.007ns | 0.017ns | 1.00x | 15 (0.1%) |
| `if-else` | 0.951ns | 1.007ns | 1.007ns | 1.007ns | 1.193ns | 1.007ns | 0.004ns | 1.00x | 132 (1.3%) |
| `branchless` | 0.956ns | 1.007ns | 1.007ns | 1.007ns | 1.293ns | 1.007ns | 0.004ns | 1.00x | 87 (0.9%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 5.798ns | 51.079ns | 51.104ns | 51.132ns | 380.058ns | 51.196ns | 5.778ns | 1.93x | 29 (0.3%) |
| `math.max (local)` | 7.395ns | 39.477ns | 39.490ns | 39.505ns | 65.052ns | 39.448ns | 1.067ns | 1.49x | 37 (0.4%) |
| `if-else` | 4.887ns | 26.486ns | 26.513ns | 26.528ns | 205.594ns | 26.510ns | 2.091ns | 1.00x | 37 (0.4%) |
| `branchless` | 5.221ns | 26.489ns | 26.514ns | 26.527ns | 42.449ns | 26.474ns | 0.776ns | 1.00x | 44 (0.4%) |

## math.max of 3 numbers

#### One-Time Setup
```lua
local max, x, y, z = math.max, 1, 100, 55
```

| Test | Code |
|------|------|
| `math.max (global)` | `out = math.max(x, y, z)` |
| `math.max (local)` | `out = max(x, y, z)` |
| `if-else` | `if x > y and x > z then out = x elseif y > z and y > x then out = y else out = z end` |
| `branchless` | `out = (x > y and x > z and x) or (y > z and y > x and y) or (z)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 71.515ns | 186.704ns | 187.324ns | 187.959ns | 228.122ns | 187.341ns | 1.976ns | 1.45x | 65 (0.7%) |
| `math.max (local)` | 10.076ns | 140.612ns | 140.947ns | 141.358ns | 512.715ns | 141.251ns | 6.985ns | 1.09x | 16 (0.2%) |
| `if-else` | 101.794ns | 128.814ns | 128.871ns | 129.076ns | 150.323ns | 128.889ns | 0.953ns | 1.00x | 61 (0.6%) |
| `branchless` | 6.788ns | 134.749ns | 134.917ns | 134.942ns | 828.209ns | 134.820ns | 10.029ns | 1.05x | 9 (0.1%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 120.413ns | 225.613ns | 226.161ns | 226.654ns | 1.256µs | 226.463ns | 17.362ns | 1.48x | 8 (0.1%) |
| `math.max (local)` | 112.079ns | 152.526ns | 153.185ns | 153.943ns | 181.436ns | 153.231ns | 1.367ns | 1.00x | 95 (0.9%) |
| `if-else` | 64.238ns | 162.913ns | 165.880ns | 170.224ns | 923.102ns | 168.110ns | 14.271ns | 1.08x | 36 (0.4%) |
| `branchless` | 43.486ns | 171.272ns | 174.479ns | 178.104ns | 665.164ns | 175.031ns | 10.233ns | 1.14x | 17 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 120.286ns | 182.450ns | 182.617ns | 182.849ns | 761.662ns | 182.596ns | 5.947ns | 1.34x | 6 (0.1%) |
| `math.max (local)` | 33.205ns | 136.670ns | 136.772ns | 137.254ns | 714.538ns | 137.065ns | 9.314ns | 1.00x | 15 (0.1%) |
| `if-else` | 2.073ns | 137.797ns | 137.893ns | 138.001ns | 787.561ns | 137.755ns | 16.282ns | 1.01x | 75 (0.8%) |
| `branchless` | 25.600ns | 142.256ns | 142.316ns | 142.375ns | 756.238ns | 142.160ns | 8.839ns | 1.04x | 44 (0.4%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 16.270ns | 160.719ns | 162.401ns | 163.898ns | 885.824ns | 161.997ns | 16.000ns | 1.71x | 83 (0.8%) |
| `math.max (local)` | 34.642ns | 140.870ns | 142.848ns | 143.746ns | 337.341ns | 141.678ns | 6.384ns | 1.51x | 53 (0.5%) |
| `if-else` | 17.297ns | 94.627ns | 94.727ns | 94.897ns | 704.203ns | 94.783ns | 8.166ns | 1.00x | 36 (0.4%) |
| `branchless` | 26.764ns | 102.675ns | 102.706ns | 102.735ns | 587.787ns | 102.631ns | 6.753ns | 1.08x | 33 (0.3%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 9.113ns | 10.067ns | 10.069ns | 10.070ns | 11.159ns | 10.069ns | 0.027ns | 10.00x | 156 (1.6%) |
| `math.max (local)` | 0.924ns | 1.007ns | 1.007ns | 1.007ns | 1.144ns | 1.007ns | 0.004ns | 1.00x | 134 (1.3%) |
| `if-else` | 0.819ns | 1.007ns | 1.007ns | 1.007ns | 1.063ns | 1.007ns | 0.003ns | 1.00x | 140 (1.4%) |
| `branchless` | 0.921ns | 1.007ns | 1.007ns | 1.007ns | 1.109ns | 1.007ns | 0.003ns | 1.00x | 153 (1.5%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.max (global)` | 1.170ns | 56.401ns | 56.421ns | 56.442ns | 107.569ns | 56.379ns | 1.789ns | 1.30x | 41 (0.4%) |
| `math.max (local)` | 5.945ns | 43.376ns | 43.424ns | 43.481ns | 171.187ns | 43.419ns | 2.361ns | 1.00x | 38 (0.4%) |
| `if-else` | 0.178ns | 59.051ns | 59.121ns | 59.174ns | 335.021ns | 59.144ns | 4.876ns | 1.36x | 30 (0.3%) |
| `branchless` | 11.178ns | 57.582ns | 57.620ns | 57.657ns | 706.132ns | 57.774ns | 9.743ns | 1.33x | 21 (0.2%) |

## select

#### One-Time Setup
```lua
local function fn()
	return 1, 2, 3, 4
end
local sel = select
```

| Test | Code |
|------|------|
| `argument expanision` | `local _; _, _, _, out = fn()` |
| `select (global)` | `out = select(4, fn())` |
| `select (local)` | `out = sel(4, fn())` |
| `table` | `out = ({ fn() })[4]` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 127.756ns | 144.496ns | 144.980ns | 145.158ns | 426.194ns | 144.962ns | 3.025ns | 1.00x | 11 (0.1%) |
| `select (global)` | 69.605ns | 226.983ns | 227.900ns | 228.831ns | 1.099µs | 228.240ns | 15.460ns | 1.57x | 11 (0.1%) |
| `select (local)` | 97.979ns | 204.912ns | 206.014ns | 207.433ns | 251.898ns | 206.188ns | 2.475ns | 1.42x | 32 (0.3%) |
| `table` | 243.031ns | 404.748ns | 427.110ns | 433.763ns | 1.535µs | 420.029ns | 23.910ns | 2.95x | 23 (0.2%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 76.472ns | 198.241ns | 200.033ns | 203.212ns | 1.015µs | 200.849ns | 15.584ns | 1.00x | 14 (0.1%) |
| `select (global)` | 25.277ns | 255.249ns | 256.234ns | 257.286ns | 1.423µs | 256.519ns | 15.293ns | 1.28x | 12 (0.1%) |
| `select (local)` | 70.097ns | 260.660ns | 265.662ns | 271.091ns | 1.047µs | 266.434ns | 16.506ns | 1.33x | 13 (0.1%) |
| `table` | 30.912ns | 417.971ns | 421.041ns | 422.980ns | 804.167ns | 417.028ns | 16.492ns | 2.10x | 25 (0.3%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 97.709ns | 140.879ns | 140.971ns | 141.077ns | 416.686ns | 141.100ns | 4.547ns | 1.00x | 24 (0.2%) |
| `select (global)` | 12.479ns | 220.996ns | 221.393ns | 222.733ns | 816.534ns | 221.948ns | 8.739ns | 1.57x | 15 (0.1%) |
| `select (local)` | 153.278ns | 198.530ns | 198.887ns | 199.734ns | 1.146µs | 199.258ns | 9.701ns | 1.41x | 9 (0.1%) |
| `table` | 261.346ns | 415.150ns | 417.762ns | 419.981ns | 1.263µs | 414.238ns | 20.698ns | 2.96x | 22 (0.2%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 11.672ns | 132.613ns | 133.857ns | 135.092ns | 693.795ns | 133.876ns | 10.170ns | 1.00x | 44 (0.4%) |
| `select (global)` | 18.838ns | 184.881ns | 187.052ns | 189.335ns | 728.823ns | 186.862ns | 8.966ns | 1.40x | 54 (0.5%) |
| `select (local)` | 45.002ns | 180.416ns | 181.884ns | 183.520ns | 977.461ns | 181.930ns | 12.504ns | 1.36x | 43 (0.4%) |
| `table` | 203.581ns | 369.783ns | 396.377ns | 417.416ns | 1.030µs | 395.445ns | 40.176ns | 2.96x | 75 (0.8%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 0.953ns | 1.007ns | 1.007ns | 1.007ns | 2.544ns | 1.007ns | 0.016ns | 1.00x | 13 (0.1%) |
| `select (global)` | 6.765ns | 7.047ns | 7.048ns | 7.049ns | 7.545ns | 7.049ns | 0.016ns | 7.00x | 225 (2.3%) |
| `select (local)` | 0.966ns | 1.007ns | 1.007ns | 1.007ns | 2.211ns | 1.007ns | 0.013ns | 1.00x | 17 (0.2%) |
| `table` | 13.172µs | 23.236µs | 23.303µs | 23.375µs | 59.176µs | 23.328µs | 597.218ns | 23144.86x | 16 (0.2%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 14.534ns | 68.757ns | 68.786ns | 68.812ns | 304.089ns | 68.760ns | 3.219ns | 1.00x | 28 (0.3%) |
| `select (global)` | 7.567ns | 103.005ns | 103.142ns | 103.269ns | 623.876ns | 103.101ns | 6.227ns | 1.50x | 25 (0.3%) |
| `select (local)` | 30.943ns | 99.678ns | 99.792ns | 99.882ns | 354.527ns | 99.707ns | 3.681ns | 1.45x | 32 (0.3%) |
| `table` | 50.961ns | 188.309ns | 430.102ns | 458.817ns | 1.139µs | 358.242ns | 124.007ns | 6.25x | 4 (0.0%) |

## square

#### One-Time Setup
```lua
local x, pow = 10, math.pow
```

| Test | Code |
|------|------|
| `math.pow (global)` | `out = math.pow(x, 3)` |
| `math.pow (local)` | `out = pow(x, 3)` |
| `multiply` | `out = x * x * x` |
| `exponent` | `out = x ^ 3` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 16.817ns | 243.730ns | 244.364ns | 245.031ns | 554.813ns | 244.428ns | 5.769ns | 4.11x | 32 (0.3%) |
| `math.pow (local)` | 96.443ns | 200.056ns | 200.456ns | 200.809ns | 980.713ns | 200.729ns | 13.662ns | 3.37x | 8 (0.1%) |
| `multiply` | 18.045ns | 59.398ns | 59.403ns | 59.408ns | 221.508ns | 59.422ns | 1.889ns | 1.00x | 10 (0.1%) |
| `exponent` | 73.015ns | 87.632ns | 87.666ns | 87.700ns | 332.711ns | 87.635ns | 3.155ns | 1.48x | 9 (0.1%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 23.750ns | 258.079ns | 258.844ns | 259.565ns | 1.114µs | 258.976ns | 14.006ns | 3.62x | 10 (0.1%) |
| `math.pow (local)` | 21.337ns | 184.457ns | 184.903ns | 185.360ns | 700.463ns | 184.995ns | 7.057ns | 2.59x | 19 (0.2%) |
| `multiply` | 39.764ns | 71.475ns | 71.481ns | 71.489ns | 273.976ns | 71.548ns | 3.668ns | 1.00x | 14 (0.1%) |
| `exponent` | 38.501ns | 95.856ns | 95.881ns | 95.907ns | 214.041ns | 95.826ns | 1.509ns | 1.34x | 27 (0.3%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 85.206ns | 246.324ns | 246.469ns | 246.606ns | 1.029µs | 246.763ns | 13.127ns | 4.64x | 10 (0.1%) |
| `math.pow (local)` | 167.297ns | 202.421ns | 202.886ns | 203.302ns | 1.021µs | 202.972ns | 8.309ns | 3.82x | 6 (0.1%) |
| `multiply` | 13.663ns | 53.060ns | 53.079ns | 53.097ns | 342.185ns | 53.228ns | 5.776ns | 1.00x | 14 (0.1%) |
| `exponent` | 43.600ns | 108.283ns | 108.434ns | 108.710ns | 452.123ns | 108.471ns | 3.585ns | 2.04x | 6 (0.1%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 44.350ns | 213.947ns | 215.225ns | 216.655ns | 1.083µs | 215.059ns | 14.769ns | 3.95x | 62 (0.6%) |
| `math.pow (local)` | 53.848ns | 185.745ns | 187.780ns | 190.681ns | 911.515ns | 187.913ns | 9.555ns | 3.45x | 34 (0.3%) |
| `multiply` | 4.702ns | 54.354ns | 54.431ns | 55.370ns | 417.721ns | 54.688ns | 5.044ns | 1.00x | 41 (0.4%) |
| `exponent` | 20.169ns | 92.012ns | 92.106ns | 92.203ns | 268.522ns | 91.774ns | 3.600ns | 1.69x | 50 (0.5%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 8.645ns | 9.060ns | 9.062ns | 9.064ns | 13.992ns | 9.063ns | 0.054ns | 9.00x | 22 (0.2%) |
| `math.pow (local)` | 0.863ns | 1.007ns | 1.007ns | 1.007ns | 1.197ns | 1.007ns | 0.005ns | 1.00x | 122 (1.2%) |
| `multiply` | 0.948ns | 1.007ns | 1.007ns | 1.007ns | 2.545ns | 1.007ns | 0.016ns | 1.00x | 4 (0.0%) |
| `exponent` | 0.949ns | 1.007ns | 1.007ns | 1.007ns | 1.073ns | 1.007ns | 0.003ns | 1.00x | 156 (1.6%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `math.pow (global)` | 15.537ns | 109.338ns | 109.371ns | 109.407ns | 647.064ns | 109.329ns | 6.332ns | 3.73x | 29 (0.3%) |
| `math.pow (local)` | 0.676ns | 98.936ns | 99.025ns | 99.110ns | 571.463ns | 98.998ns | 6.839ns | 3.38x | 24 (0.2%) |
| `multiply` | 5.984ns | 29.257ns | 29.292ns | 29.317ns | 112.820ns | 29.284ns | 1.267ns | 1.00x | 36 (0.4%) |
| `exponent` | 28.092ns | 77.966ns | 77.989ns | 78.012ns | 400.401ns | 77.971ns | 4.958ns | 2.66x | 30 (0.3%) |

## string concatenation

#### One-Time Setup
```lua
local bs = string.rep("---------", 127)
local t = { bs, bs, bs, bs, bs, bs, bs, bs, bs, bs }
local concat, format = table.concat, string.format
```

| Test | Code |
|------|------|
| `all-in-one` | `out = bs .. bs .. bs .. bs .. bs .. bs .. bs .. bs .. bs .. bs` |
| `separated` | `out = bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs; out = out .. bs;` |
| `loop` | `out = bs; for i = 1, 9 do out = out .. bs end` |
| `format` | `out = format("%s%s%s%s%s%s%s%s%s%s", bs, bs, bs, bs, bs, bs, bs, bs, bs, bs)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 999.630ns | 1.403µs | 1.411µs | 1.419µs | 2.010µs | 1.413µs | 17.382ns | 1.00x | 39 (0.4%) |
| `separated` | 7.225µs | 10.243µs | 10.279µs | 10.313µs | 16.504µs | 10.282µs | 114.438ns | 7.29x | 26 (0.3%) |
| `loop` | 9.663µs | 10.320µs | 10.352µs | 10.386µs | 12.777µs | 10.355µs | 70.880ns | 7.34x | 51 (0.5%) |
| `format` | 2.224µs | 5.379µs | 5.402µs | 5.425µs | 13.497µs | 5.406µs | 149.048ns | 3.83x | 21 (0.2%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 865.674ns | 1.787µs | 1.803µs | 1.821µs | 3.225µs | 1.822µs | 124.262ns | 1.00x | 224 (2.2%) |
| `separated` | 11.029µs | 17.445µs | 18.127µs | 18.457µs | 51.060µs | 18.039µs | 926.567ns | 10.06x | 69 (0.7%) |
| `loop` | 3.459µs | 17.830µs | 18.532µs | 18.826µs | 44.848µs | 18.440µs | 922.999ns | 10.28x | 75 (0.8%) |
| `format` | 7.636ns | 5.808µs | 5.845µs | 6.307µs | 21.263µs | 6.104µs | 1.840µs | 3.24x | 321 (3.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 970.149ns | 1.623µs | 1.651µs | 1.973µs | 11.798µs | 1.745µs | 286.556ns | 1.00x | 95 (0.9%) |
| `separated` | 3.088µs | 16.938µs | 17.305µs | 17.561µs | 35.372µs | 17.285µs | 692.655ns | 10.48x | 80 (0.8%) |
| `loop` | 11.923µs | 16.520µs | 16.875µs | 17.146µs | 33.953µs | 16.888µs | 758.677ns | 10.22x | 87 (0.9%) |
| `format` | 4.846µs | 5.983µs | 6.043µs | 6.100µs | 25.696µs | 6.046µs | 309.546ns | 3.66x | 17 (0.2%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 668.227ns | 1.617µs | 1.938µs | 2.131µs | 12.889µs | 1.902µs | 414.065ns | 1.00x | 102 (1.0%) |
| `separated` | 6.803µs | 17.051µs | 18.154µs | 19.231µs | 64.813µs | 18.831µs | 3.832µs | 9.37x | 113 (1.1%) |
| `loop` | 5.540µs | 17.048µs | 18.174µs | 19.241µs | 51.714µs | 18.707µs | 3.649µs | 9.38x | 129 (1.3%) |
| `format` | 2.360µs | 6.647µs | 6.868µs | 7.097µs | 27.675µs | 6.887µs | 477.884ns | 3.54x | 22 (0.2%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 0.450ns | 1.007ns | 1.007ns | 1.007ns | 1.196ns | 1.007ns | 0.007ns | 1.00x | 54 (0.5%) |
| `separated` | 0.865ns | 1.007ns | 1.007ns | 1.007ns | 1.193ns | 1.007ns | 0.007ns | 1.00x | 126 (1.3%) |
| `loop` | 5.266µs | 6.341µs | 6.363µs | 6.386µs | 9.014µs | 6.364µs | 50.910ns | 6319.74x | 55 (0.5%) |
| `format` | 0.875ns | 1.007ns | 1.007ns | 1.007ns | 1.107ns | 1.007ns | 0.004ns | 1.00x | 146 (1.5%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `all-in-one` | 687.663ns | 1.181µs | 1.190µs | 1.202µs | 2.152µs | 1.196µs | 33.350ns | 1.00x | 141 (1.4%) |
| `separated` | 6.335µs | 8.847µs | 8.882µs | 8.916µs | 13.881µs | 8.883µs | 105.903ns | 7.46x | 58 (0.6%) |
| `loop` | 7.459µs | 8.793µs | 8.827µs | 8.859µs | 9.886µs | 8.826µs | 76.998ns | 7.42x | 53 (0.5%) |
| `format` | 549.128ns | 1.755µs | 1.766µs | 1.779µs | 4.241µs | 1.768µs | 60.849ns | 1.48x | 32 (0.3%) |

## table insert

#### One-Time Setup
```lua
local tinsert = table.insert
```

#### Per Iteration Setup
```lua
out = { [0] = 0, n = 0 }
local count = 1
```

| Test | Code |
|------|------|
| `table.insert` | `tinsert(out, __i)` |
| `loop parameter` | `out[__i] = __i` |
| `#table+1` | `out[#out + 1] = __i` |
| `table.n` | `out.n = out.n + 1; out[out.n] = __i` |
| `table[0]` | `out[0] = out[0] + 1; out[out[0]] = __i` |
| `lockstep parameter` | `out[count] = __i; count = count + 1` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert` | 141.716ns | 296.291ns | 296.990ns | 297.725ns | 1.053µs | 297.138ns | 8.460ns | 5.17x | 28 (0.3%) |
| `loop parameter` | 16.782ns | 56.465ns | 57.448ns | 58.489ns | 144.884ns | 57.545ns | 2.461ns | 1.00x | 23 (0.2%) |
| `#table+1` | 217.937ns | 249.973ns | 250.790ns | 251.712ns | 398.311ns | 250.917ns | 2.716ns | 4.37x | 20 (0.2%) |
| `table.n` | 37.300ns | 168.850ns | 169.223ns | 169.705ns | 611.082ns | 169.463ns | 7.811ns | 2.95x | 21 (0.2%) |
| `table[0]` | 84.924ns | 173.919ns | 174.616ns | 175.351ns | 591.758ns | 174.693ns | 4.552ns | 3.04x | 15 (0.1%) |
| `lockstep parameter` | 0.397ns | 69.194ns | 70.417ns | 71.308ns | 274.681ns | 70.296ns | 3.648ns | 1.23x | 12 (0.1%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert` | 4.864ns | 332.172ns | 333.654ns | 335.214ns | 979.241ns | 333.927ns | 12.918ns | 5.44x | 24 (0.2%) |
| `loop parameter` | 25.877ns | 61.261ns | 61.304ns | 61.350ns | 194.106ns | 61.328ns | 1.457ns | 1.00x | 22 (0.2%) |
| `#table+1` | 193.848ns | 257.802ns | 259.199ns | 260.534ns | 521.284ns | 259.263ns | 5.505ns | 4.23x | 23 (0.2%) |
| `table.n` | 132.970ns | 183.151ns | 187.168ns | 189.666ns | 513.796ns | 186.524ns | 6.178ns | 3.05x | 17 (0.2%) |
| `table[0]` | 60.258ns | 242.922ns | 243.361ns | 243.957ns | 694.104ns | 243.618ns | 9.180ns | 3.97x | 14 (0.1%) |
| `lockstep parameter` | 53.722ns | 74.564ns | 74.605ns | 74.654ns | 126.913ns | 74.651ns | 0.872ns | 1.22x | 55 (0.5%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert` | 11.811ns | 319.000ns | 319.920ns | 320.976ns | 1.266µs | 320.378ns | 22.007ns | 5.36x | 66 (0.7%) |
| `loop parameter` | 6.778ns | 59.358ns | 59.741ns | 60.210ns | 204.656ns | 60.221ns | 3.950ns | 1.00x | 172 (1.7%) |
| `#table+1` | 104.358ns | 257.973ns | 259.710ns | 262.239ns | 571.574ns | 260.299ns | 12.312ns | 4.35x | 130 (1.3%) |
| `table.n` | 2.839ns | 147.038ns | 148.359ns | 151.221ns | 446.534ns | 149.526ns | 10.022ns | 2.48x | 113 (1.1%) |
| `table[0]` | 2.616ns | 148.830ns | 149.581ns | 150.710ns | 375.135ns | 150.270ns | 6.797ns | 2.50x | 101 (1.0%) |
| `lockstep parameter` | 8.026ns | 69.930ns | 70.791ns | 71.747ns | 201.029ns | 70.846ns | 3.967ns | 1.18x | 58 (0.6%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert` | 18.183ns | 164.620ns | 165.804ns | 167.014ns | 803.748ns | 165.887ns | 13.289ns | 3.57x | 39 (0.4%) |
| `loop parameter` | 9.781ns | 53.148ns | 53.961ns | 55.109ns | 85.118ns | 54.511ns | 2.426ns | 1.16x | 124 (1.2%) |
| `#table+1` | 7.756ns | 77.293ns | 77.861ns | 78.537ns | 311.955ns | 77.903ns | 4.582ns | 1.67x | 50 (0.5%) |
| `table.n` | 1.594ns | 94.408ns | 94.643ns | 94.930ns | 298.750ns | 94.509ns | 4.137ns | 2.04x | 57 (0.6%) |
| `table[0]` | 48.523ns | 124.240ns | 125.343ns | 126.466ns | 472.145ns | 125.223ns | 6.757ns | 2.70x | 47 (0.5%) |
| `lockstep parameter` | 0.762ns | 46.268ns | 46.504ns | 46.921ns | 148.787ns | 46.519ns | 1.937ns | 1.00x | 50 (0.5%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert` | 11.068ns | 21.882ns | 22.125ns | 22.364ns | 42.232ns | 22.191ns | 1.194ns | 1.36x | 130 (1.3%) |
| `loop parameter` | 14.723ns | 16.128ns | 16.317ns | 16.531ns | 18.977ns | 16.357ns | 0.390ns | 1.00x | 145 (1.5%) |
| `#table+1` | 10.780ns | 22.670ns | 22.817ns | 23.027ns | 40.752ns | 23.018ns | 1.597ns | 1.40x | 265 (2.6%) |
| `table.n` | 18.103ns | 19.410ns | 19.649ns | 19.865ns | 23.834ns | 19.665ns | 0.404ns | 1.20x | 118 (1.2%) |
| `table[0]` | 23.103ns | 24.525ns | 24.711ns | 24.934ns | 35.167ns | 24.719ns | 0.468ns | 1.51x | 89 (0.9%) |
| `lockstep parameter` | 17.832ns | 19.415ns | 19.652ns | 19.873ns | 26.977ns | 19.681ns | 0.440ns | 1.20x | 138 (1.4%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `table.insert` | 21.099ns | 226.409ns | 227.293ns | 228.144ns | 530.887ns | 227.108ns | 6.948ns | 7.21x | 53 (0.5%) |
| `loop parameter` | 0.243ns | 31.308ns | 31.514ns | 31.716ns | 161.185ns | 31.397ns | 3.034ns | 1.00x | 95 (0.9%) |
| `#table+1` | 85.273ns | 195.228ns | 196.109ns | 196.954ns | 230.773ns | 195.912ns | 3.544ns | 6.22x | 49 (0.5%) |
| `table.n` | 13.029ns | 52.176ns | 52.221ns | 52.264ns | 217.304ns | 52.186ns | 3.169ns | 1.66x | 52 (0.5%) |
| `table[0]` | 3.620ns | 46.140ns | 46.229ns | 46.284ns | 88.388ns | 46.140ns | 1.652ns | 1.47x | 39 (0.4%) |
| `lockstep parameter` | 0.236ns | 35.541ns | 35.783ns | 36.032ns | 91.847ns | 35.681ns | 2.057ns | 1.14x | 100 (1.0%) |

## table slice

#### One-Time Setup
```lua
local unpack = unpack or table.unpack
local a = {}
for i = 1, 2000 do
	a[i] = i
end
local x, y = 500, 1500
local tnew = table.new
```

| Test | Code |
|------|------|
| `unpack` | `out = {unpack(a, x, y)}` |
| `from scratch` | `out = {}; for i = x, y do out[i - x + 1] = a[i] end` |
| `allocated` | `out = table.new(y - x, 0); for i = x, y do out[i - x + 1] = a[i] end` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 14.985µs | 30.454µs | 30.754µs | 31.008µs | 94.427µs | 30.681µs | 914.759ns | 1.00x | 30 (0.3%) |
| `from scratch` | 41.041µs | 137.279µs | 137.601µs | 137.924µs | 253.002µs | 137.615µs | 2.363µs | 4.47x | 26 (0.3%) |
| `allocated` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 8.864µs | 31.795µs | 31.832µs | 31.875µs | 42.165µs | 31.847µs | 406.335ns | 1.00x | 58 (0.6%) |
| `from scratch` | 35.490µs | 136.166µs | 136.289µs | 136.420µs | 520.838µs | 136.469µs | 6.403µs | 4.28x | 11 (0.1%) |
| `allocated` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 10.000µs | 30.684µs | 30.925µs | 31.186µs | 99.976µs | 30.979µs | 1.065µs | 1.00x | 20 (0.2%) |
| `from scratch` | 10.507µs | 115.059µs | 115.196µs | 115.344µs | 334.664µs | 115.269µs | 3.850µs | 3.73x | 13 (0.1%) |
| `allocated` | - | - | - | - | - | - | - | - | - |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 2.019µs | 25.786µs | 26.158µs | 26.503µs | 84.322µs | 26.158µs | 1.312µs | 1.00x | 54 (0.5%) |
| `from scratch` | 12.220µs | 94.556µs | 94.772µs | 94.975µs | 432.359µs | 94.456µs | 6.368µs | 3.62x | 126 (1.3%) |
| `allocated` | - | - | - | - | - | - | - | - | - |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 7.697µs | 9.018µs | 9.331µs | 21.284µs | 30.678µs | 16.099µs | 8.349µs | 1.10x | 0 (0.0%) |
| `from scratch` | 8.929µs | 10.086µs | 10.159µs | 10.277µs | 15.867µs | 10.187µs | 193.634ns | 1.20x | 93 (0.9%) |
| `allocated` | 4.075µs | 8.304µs | 8.463µs | 8.667µs | 17.481µs | 8.493µs | 335.872ns | 1.00x | 69 (0.7%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `unpack` | 8.441µs | 9.408µs | 19.169µs | 22.035µs | 38.248µs | 18.831µs | 8.915µs | 1.00x | 0 (0.0%) |
| `from scratch` | 5.816µs | 53.465µs | 53.857µs | 53.928µs | 273.440µs | 53.717µs | 3.752µs | 2.81x | 45 (0.4%) |
| `allocated` | 10.924µs | 50.362µs | 50.406µs | 50.450µs | 216.042µs | 50.369µs | 2.458µs | 2.63x | 29 (0.3%) |

## table unpack

#### One-Time Setup
```lua
local a = { 9, 121, 131, 1787 }
local unpack = unpack or table.unpack
local function unpack4(a)
	return a[1], a[2], a[3], a[4]
end
```

| Test | Code |
|------|------|
| `argument expanision` | `local a1, a2, a3, a4 = a[1], a[2], a[3], a[4]` |
| `unpack` | `local a1, a2, a3, a4 = unpack(a)` |
| `function` | `local a1, a2, a3, a4 = unpack4(a)` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 34.036ns | 180.366ns | 185.966ns | 189.909ns | 612.211ns | 185.300ns | 9.380ns | 1.00x | 15 (0.1%) |
| `unpack` | 165.047ns | 203.054ns | 204.862ns | 206.393ns | 223.426ns | 204.716ns | 2.994ns | 1.10x | 91 (0.9%) |
| `function` | 72.367ns | 235.423ns | 236.763ns | 237.842ns | 703.354ns | 236.807ns | 8.307ns | 1.27x | 19 (0.2%) |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 110.722ns | 207.584ns | 211.931ns | 215.273ns | 590.988ns | 211.910ns | 7.070ns | 1.00x | 13 (0.1%) |
| `unpack` | 128.399ns | 239.737ns | 240.436ns | 241.822ns | 946.650ns | 240.888ns | 7.918ns | 1.13x | 12 (0.1%) |
| `function` | 81.072ns | 347.869ns | 348.713ns | 349.576ns | 837.045ns | 348.772ns | 9.219ns | 1.65x | 24 (0.2%) |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 80.267ns | 99.374ns | 99.387ns | 99.403ns | 472.614ns | 99.507ns | 5.453ns | 1.00x | 6 (0.1%) |
| `unpack` | 23.239ns | 221.405ns | 222.590ns | 223.646ns | 775.769ns | 222.600ns | 8.654ns | 2.24x | 10 (0.1%) |
| `function` | 80.559ns | 169.527ns | 169.720ns | 169.884ns | 742.095ns | 169.832ns | 8.225ns | 1.71x | 8 (0.1%) |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 16.792ns | 81.542ns | 81.558ns | 81.583ns | 142.149ns | 81.455ns | 3.009ns | 1.00x | 61 (0.6%) |
| `unpack` | 54.244ns | 209.798ns | 212.482ns | 215.109ns | 1.124µs | 212.356ns | 16.910ns | 2.61x | 40 (0.4%) |
| `function` | 36.697ns | 130.771ns | 132.154ns | 133.488ns | 472.106ns | 131.972ns | 7.210ns | 1.62x | 49 (0.5%) |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 0.869ns | 1.007ns | 1.007ns | 1.007ns | 1.077ns | 1.007ns | 0.004ns | 1.00x | 176 (1.8%) |
| `unpack` | 2.681ns | 102.967ns | 103.165ns | 103.325ns | 334.060ns | 103.148ns | 5.408ns | 102.46x | 45 (0.4%) |
| `function` | 0.957ns | 1.007ns | 1.007ns | 1.007ns | 1.773ns | 1.007ns | 0.008ns | 1.00x | 27 (0.3%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `argument expanision` | 7.206ns | 47.329ns | 47.375ns | 47.419ns | 419.215ns | 47.378ns | 4.384ns | 1.00x | 31 (0.3%) |
| `unpack` | 26.334ns | 77.649ns | 77.778ns | 78.101ns | 519.220ns | 78.017ns | 5.375ns | 1.64x | 27 (0.3%) |
| `function` | 19.005ns | 74.177ns | 74.201ns | 74.227ns | 614.902ns | 74.567ns | 10.858ns | 1.57x | 22 (0.2%) |

## table.new

| Test | Code |
|------|------|
| `literal` | `out = {1, 2, 3}` |
| `start empty` | `out = {}; out[1] = 1; out[2] = 2; out[3] = 3` |
| `start false` | `out = {false, false, false}; out[1] = 1; out[2] = 2; out[3] = 3` |
| `preallocate` | `out = table.new(3, 0); out[1] = 1; out[2] = 2; out[3] = 3` |
| `ffi fill` | `out = ffi.new("int[3]", 1, 2, 3)` |
| `ffi individual` | `out = ffi.new("int[3]"); out[0] = 1; out[1] = 2; out[2] = 3` |

### Lua 5.1

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 73.297ns | 241.043ns | 255.315ns | 264.255ns | 660.299ns | 253.936ns | 16.687ns | 1.00x | 38 (0.4%) |
| `start empty` | 443.375ns | 1.005µs | 1.007µs | 1.009µs | 2.696µs | 1.009µs | 29.701ns | 3.95x | 32 (0.3%) |
| `start false` | 153.053ns | 458.720ns | 461.732ns | 464.793ns | 1.148µs | 462.301ns | 14.728ns | 1.81x | 39 (0.4%) |
| `preallocate` | - | - | - | - | - | - | - | - | - |
| `ffi fill` | - | - | - | - | - | - | - | - | - |
| `ffi individual` | - | - | - | - | - | - | - | - | - |

### Lua 5.2

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 45.338ns | 264.317ns | 268.661ns | 276.852ns | 955.608ns | 270.054ns | 13.243ns | 1.00x | 27 (0.3%) |
| `start empty` | 820.709ns | 943.932ns | 947.131ns | 951.849ns | 1.084µs | 947.968ns | 6.923ns | 3.53x | 61 (0.6%) |
| `start false` | 165.452ns | 478.228ns | 486.843ns | 493.529ns | 1.278µs | 481.221ns | 24.776ns | 1.81x | 33 (0.3%) |
| `preallocate` | - | - | - | - | - | - | - | - | - |
| `ffi fill` | - | - | - | - | - | - | - | - | - |
| `ffi individual` | - | - | - | - | - | - | - | - | - |

### Lua 5.3

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 27.593ns | 285.471ns | 292.569ns | 301.246ns | 1.059µs | 294.244ns | 20.887ns | 1.00x | 96 (1.0%) |
| `start empty` | 141.122ns | 905.355ns | 913.847ns | 926.710ns | 2.602µs | 916.013ns | 30.931ns | 3.12x | 20 (0.2%) |
| `start false` | 123.992ns | 333.632ns | 340.645ns | 348.540ns | 842.804ns | 341.200ns | 14.016ns | 1.16x | 72 (0.7%) |
| `preallocate` | - | - | - | - | - | - | - | - | - |
| `ffi fill` | - | - | - | - | - | - | - | - | - |
| `ffi individual` | - | - | - | - | - | - | - | - | - |

### Lua 5.4

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 167.085ns | 266.148ns | 305.789ns | 334.341ns | 707.163ns | 302.107ns | 45.358ns | 1.09x | 26 (0.3%) |
| `start empty` | 466.669ns | 863.565ns | 867.867ns | 871.636ns | 1.747µs | 867.164ns | 19.417ns | 3.11x | 40 (0.4%) |
| `start false` | 152.077ns | 255.690ns | 279.355ns | 293.465ns | 1.223µs | 277.035ns | 26.261ns | 1.00x | 26 (0.3%) |
| `preallocate` | - | - | - | - | - | - | - | - | - |
| `ffi fill` | - | - | - | - | - | - | - | - | - |
| `ffi individual` | - | - | - | - | - | - | - | - | - |

### LuaJIT

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 0.869ns | 1.007ns | 1.007ns | 1.007ns | 2.323ns | 1.007ns | 0.014ns | 1.00x | 14 (0.1%) |
| `start empty` | 246.476ns | 364.506ns | 365.981ns | 367.715ns | 1.027µs | 366.597ns | 12.828ns | 363.49x | 29 (0.3%) |
| `start false` | 0.856ns | 1.007ns | 1.007ns | 1.007ns | 1.072ns | 1.007ns | 0.004ns | 1.00x | 161 (1.6%) |
| `preallocate` | 0.523ns | 1.007ns | 1.007ns | 1.007ns | 2.118ns | 1.007ns | 0.016ns | 1.00x | 16 (0.2%) |
| `ffi fill` | 0.953ns | 1.007ns | 1.007ns | 1.007ns | 1.094ns | 1.007ns | 0.003ns | 1.00x | 169 (1.7%) |
| `ffi individual` | 0.853ns | 1.007ns | 1.007ns | 1.007ns | 2.464ns | 1.007ns | 0.016ns | 1.00x | 19 (0.2%) |

### LuaJIT (Interpreter)

| Test | Min | Q25 | Median | Q75 | Max | Mean | Stddev | Cost | Outliers |
|------|-----|-----|--------|-----|-----|------|--------|------|----------|
| `literal` | 54.743ns | 81.678ns | 83.109ns | 84.446ns | 207.034ns | 83.209ns | 3.239ns | 1.00x | 73 (0.7%) |
| `start empty` | 34.287ns | 476.858ns | 477.788ns | 478.473ns | 1.619µs | 478.201ns | 20.453ns | 5.75x | 19 (0.2%) |
| `start false` | 69.860ns | 96.863ns | 97.349ns | 97.920ns | 574.291ns | 97.649ns | 6.282ns | 1.17x | 13 (0.1%) |
| `preallocate` | 22.310ns | 170.809ns | 171.094ns | 171.447ns | 728.328ns | 171.308ns | 6.964ns | 2.06x | 14 (0.1%) |
| `ffi fill` | 179.785ns | 851.845ns | 853.165ns | 854.284ns | 3.050µs | 853.499ns | 36.576ns | 10.27x | 39 (0.4%) |
| `ffi individual` | 385.655ns | 1.176µs | 1.179µs | 1.181µs | 1.649µs | 1.178µs | 23.780ns | 14.19x | 44 (0.4%) |
